!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=46)}([function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/typeof")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("@babel/runtime/helpers/slicedToArray")},function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return h})),r.d(t,"g",(function(){return p})),r.d(t,"e",(function(){return s})),r.d(t,"f",(function(){return u})),r.d(t,"d",(function(){return d})),r.d(t,"a",(function(){return y})),r.d(t,"h",(function(){return f}));var n=r(3),o=r.n(n),i=(r(0),r(2),r(5)),a=r.n(i),c=function(e){return e?"function"==typeof e.entries?e.entries():Object.entries(e):[]},u=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_id",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=new Object,a="function"==typeof r?r:function(e,t){return t[r]};return t="function"==typeof n?n:n?function(e,t){return t[n]}:function(e,t){return t},l(e,(function(e,r){var n=a(e,r);i[n]=t(e,r),void 0===i[n]&&(i[a(r)]=o)})),i},s=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_id",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=new Object,a="function"==typeof r?r:function(e,t){return t[r]};return t="function"==typeof n?n:n?function(e,t){return t[n]}:function(e,t){return t},l(e,(function(e,r){var n=a(e,r);i[n]=i[n]||new Array,i[n].push(t(e,r)||o)})),i},f=function(e){return e.filter((function(e,t,r){return r.indexOf(e)===t}))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Object,t=arguments.length>1?arguments[1]:void 0,r=!0,n=!1,o=void 0;try{for(var i,u=c(e)[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var s=a()(i.value,2),f=s[0],l=s[1],p=t(f,l,e);if("_break"===p)break}}catch(e){n=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(n)throw o}}},p=function(e,t){var r=new Object;return l(e,(function(n,o){r[n]=t(n,o,e)})),Array.isArray(e)?Object.values(r):r},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return t},r=new Object;return l(e,(function(n,o){t(n,o,e)&&(r[n]=o)})),r},d=function(e,t){var r=null;return l(e,(function(n,o){if(t(n,o,e))return r=o,"_break"})),r},v=["String","Boolean","Number","Date","Function"],y=function e(t,r){if((i=t)&&"object"===o()(i)&&!v.includes(i.constructor.name)){for(var n in t)t[n]=e(t[n],r);return r(t)}return t;var i}},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@babel/runtime/helpers/taggedTemplateLiteral")},function(e,t){e.exports=require("@babel/runtime/helpers/createClass")},function(e,t){e.exports=fs},function(e,t){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,t){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("@babel/runtime/helpers/inherits")},function(e,t){e.exports=require("@babel/runtime/helpers/construct")},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,t,r){"use strict";r.r(t),r.d(t,"Pipe",(function(){return O}));var n=r(3),o=r.n(n),i=r(5),a=r.n(i),c=r(0),u=r.n(c),s=r(4),f=r.n(s),l=r(2),p=r.n(l),h=r(7),d=r.n(h),v=r(9),y=r.n(v),m=r(1),g=r.n(m),b=r(6),w=Symbol(),E=Symbol(),O=function(){function e(t){var r,n=this;d()(this,e),g()(this,"listeners",[]),g()(this,"observers",[]),g()(this,"dependencies",[]),g()(this,"errorHandlers",[]),g()(this,"cancelationHandlers",[]),g()(this,"executions",[]),g()(this,"currentValue",E),g()(this,"resources",{}),g()(this,"emit",function(){var e=p()(u.a.mark((function e(){var t,r,o,i,a,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=c.length,r=new Array(t),o=0;o<t;o++)r[o]=c[o];return n.currentValue=r[0],i=f()(n.listeners),a=f()(n.observers),n.listeners=[],e.next=7,Promise.all([].concat(f()(i.map((function(e){return e.apply(void 0,r)}))),f()(a.map((function(e){return e.apply(void 0,r)})))));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),g()(this,"throwError",(function(e){n.currentValue=e,n.errorHandlers.forEach((function(t){return t(e)}))})),g()(this,w,p()(u.a.mark((function e(){var t,r,o,i,a,c,s,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,o=function(){return r=!0},i=0,n.executions.push(o),(a=function(){if(!r){for(;n.executions.length&&n.executions[0]!=o;){var e=n.executions.shift();e()}n.executions.shift(),n.emit.apply(n,arguments)}}).throw=n.throwError,a.pipe=n;try{t=(c=n.process).call.apply(c,[n.thisArg,a].concat(f()(n.args)))}catch(e){n.throwError(e)}if(s=function e(o){var c=o.value,s=o.done;i++;var f,h=n.constructor,d=h.isPipe,v=h.isPromise,y=(h.isObservable,n.cached),m=n.cache,g=y(c),b=n.getCachedResource(c,i),w=function(r){return t.throw?e(t.throw(r)):n.throwError(r)};if(!s||void 0!==c)return f=s?function(){return!r&&a.apply(void 0,arguments)}:function(){return!r&&l.apply(void 0,arguments)},new Promise(p()(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=9;break}if(!(g.currentValue instanceof Error)){e.next=5;break}w(g.currentValue),e.next=7;break;case 5:return e.next=7,f(g.currentValue);case 7:e.next=27;break;case 9:if(!b){e.next=14;break}return e.next=12,f(b);case 12:e.next=27;break;case 14:if(!d(c)){e.next=19;break}n.dependencies.push(c),c.apply((function(e){m(c),f(e)}),(function(e){m(c),w(e)})),e.next=27;break;case 19:if(!v(c)){e.next=24;break}return e.next=22,c.then(f).catch((function(e){return w(e)}));case 22:e.next=27;break;case 24:return s||n.cacheResource(c,i),e.next=27,f(c);case 27:case"end":return e.stop()}}),e)}))))},l=function(e){try{e=t.next(e),s(e)}catch(e){n.throwError(e)}},!t||"function"!=typeof t.next){e.next=15;break}return e.next=13,l();case 13:e.next=17;break;case 15:return e.next=17,s({value:t,done:!0});case 17:case"end":return e.stop()}}),e)})))),g()(this,"cache",(function(e){var t=function(e){!n.observers.length&&!n.listeners.length||n.isCanceled||n[w]()};e.catch(t),e.observe(t),n.onCancel((function(){return e.unobserve(t)}))})),g()(this,"cached",(function(e){var t=n.dependencies.find((function(t){return t.isEqual(e)}));if(t)return t!==e&&e.destroy(),t})),g()(this,"getCachedResource",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e.uid||"".concat(JSON.stringify(e),".").concat(t);return n.resources[r]})),g()(this,"isEqual",(function(e){return e&&e.process==n.process&&JSON.stringify(e.args)===JSON.stringify(n.args)&&(e.thisArg==n.thisArg||!e.thisArg||!n.thisArg||n.thisArg.id==e.thisArg.id)})),Array.isArray(t)&&(r=t[0],t=t[1]),this.process=t,this.thisArg=r;for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];this.args=i,setTimeout((function(){n.alreadyInitialized||n.isCanceled||n[w]()}))}return y()(e,[{key:"observe",value:function(e){return this.cachedValue&&e(this.cachedValue),this.observers.push(e),this}},{key:"unobserve",value:function(e){this.observers=this.observers.filter((function(t){return t!=e})),0==this.observers.length&&this.destroy()}},{key:"then",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(this.currentValue!==E)return this.currentValue instanceof Error?r(this.currentValue):e(this.currentValue);var n=function e(n){t.errorHandlers=t.errorHandlers.filter((function(t){return t!=e})),r(n)};this.catch(n);var o=function(){return o=!0};return this.listeners.push(function(){var r=p()(u.a.mark((function r(){var i=arguments;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.errorHandlers=t.errorHandlers.filter((function(e){return e!=n})),!0===o){r.next=4;break}return r.next=4,e.apply(void 0,i);case 4:o();case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()),new Promise((function(e){return!0===o?e():o=e}))}},{key:"catch",value:function(e){this.errorHandlers.push(e)}},{key:"onCancel",value:function(e){this.cancelationHandlers.push(e)}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.currentValue!=E?this.currentValue instanceof Error?t(this.currentValue):e(this.currentValue):(this.then(e,t),this.alreadyInitialized=!0,this[w]())}},{key:"destroy",value:function(){this.isCanceled=!0,this.cancelationHandlers.forEach((function(e){return e()}))}},{key:"cacheResource",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(t.uid)e=t.uid;else{var n=JSON.stringify(t);e="".concat(n,".").concat(r),this.currentValue!=E&&Object(b.b)(this.resources,(function(e){var t=e.split(".");if(a()(t,1)[0]===n)throw Error("A new resource was conditionally yielded identical to a prior resource. This behavior is not supported, as TriFrame will not know where to properly yield state. Please give your resources unique `uid` properties")}))}this.resources[e]=t;var o=new EventEmitter,i=function(e){"function"==typeof e.on?e.on("Δ.change",(function(){return o.emit("change")})):Object(b.b)(e,(function(t,r){Object.defineProperty(e,t,{get:function(){return r},set:function(e){r=e,o.emit("change")}})}))};this.cache(o.on("change")),A(t,i)}}]),e}();g()(O,"isPipe",(function(e){return e&&"function"==typeof e.observe})),g()(O,"isPromise",(function(e){return e&&"function"==typeof e.then}));var _=["String","Boolean","Number","Date","Function"],A=function e(t,r){if(function(e){return e&&"object"===o()(e)&&!_.includes(e.constructor.name)}(t))for(var n in r(t),t){e(t[n],r)}}},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(33),o=r(34),i=r(35);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return s(this,e,t,r)}function s(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=p(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(t,r),o=(e=c(e,n)).write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|h(t.length);return 0===(e=c(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?c(e,0):p(e,t);if("Buffer"===t.type&&i(t.data))return p(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(f(t),e=c(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function p(e,t){var r=t.length<0?0:0|h(t.length);e=c(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function d(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return M(e).length;default:if(n)return $(e).length;t=(""+t).toLowerCase(),n=!0}}function v(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return S(this,t,r);case"base64":return P(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,o);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,o){var i,a=1,c=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,c/=2,u/=2,r/=2}function s(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var f=-1;for(i=r;i<c;i++)if(s(e,i)===s(t,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===u)return f*a}else-1!==f&&(i-=i-f),f=-1}else for(r+u>c&&(r=c-u),i=r;i>=0;i--){for(var l=!0,p=0;p<u;p++)if(s(e,i+p)!==s(t,p)){l=!1;break}if(l)return i}return-1}function b(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var c=parseInt(t.substr(2*a,2),16);if(isNaN(c))return a;e[r+a]=c}return a}function w(e,t,r,n){return F($(t,e.length-r),e,r,n)}function E(e,t,r,n){return F(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function O(e,t,r,n){return E(e,t,r,n)}function _(e,t,r,n){return F(M(t),e,r,n)}function A(e,t,r,n){return F(function(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function P(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,a,c,u,s=e[o],f=null,l=s>239?4:s>223?3:s>191?2:1;if(o+l<=r)switch(l){case 1:s<128&&(f=s);break;case 2:128==(192&(i=e[o+1]))&&(u=(31&s)<<6|63&i)>127&&(f=u);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(u=(15&s)<<12|(63&i)<<6|63&a)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:i=e[o+1],a=e[o+2],c=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&c)&&(u=(15&s)<<18|(63&i)<<12|(63&a)<<6|63&c)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),o+=l}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return s(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return f(t),t<=0?c(e,t):void 0!==r?"string"==typeof n?c(e,t).fill(r,n):c(e,t).fill(r):c(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return l(null,e)},u.allocUnsafeSlow=function(e){return l(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var a=e[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):v.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,o){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),c=Math.min(i,a),s=this.slice(n,o),f=e.slice(t,r),l=0;l<c;++l)if(s[l]!==f[l]){i=s[l],a=f[l];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return O(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function S(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function j(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=q(e[i]);return o}function k(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,r,n,o,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function D(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function L(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function I(e,t,r,n,i){return i||L(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,i){return i||L(e,0,r,8),o.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var o=t-e;r=new u(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},u.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||x(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||x(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);x(this,e,t,r,o-1,-o)}var i=0,a=1,c=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===c&&0!==this[t+i-1]&&(c=1),this[t+i]=(e/a>>0)-c&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);x(this,e,t,r,o-1,-o)}var i=r-1,a=1,c=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===c&&0!==this[t+i+1]&&(c=1),this[t+i]=(e/a>>0)-c&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=u.isBuffer(e)?e:$(new u(e,n).toString()),c=a.length;for(i=0;i<r-t;++i)this[i+t]=a[i%c]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function $(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function M(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r(15))},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u,s=[],f=!1,l=-1;function p(){f&&u&&(f=!1,u.length?s=u.concat(s):l=-1,s.length&&h())}function h(){if(!f){var e=c(p);f=!0;for(var t=s.length;t;){for(u=s,s=[];++l<t;)u&&u[l].run();l=-1,t=s.length}u=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new d(e,t)),1!==s.length||f||c(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){(function(e){t.fetch=c(e.fetch)&&c(e.ReadableStream),t.writableStream=c(e.WritableStream),t.abortController=c(e.AbortController),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(e){}var r;function n(){if(void 0!==r)return r;if(e.XMLHttpRequest){r=new e.XMLHttpRequest;try{r.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){r=null}}else r=null;return r}function o(e){var t=n();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}var i=void 0!==e.ArrayBuffer,a=i&&c(e.ArrayBuffer.prototype.slice);function c(e){return"function"==typeof e}t.arraybuffer=t.fetch||i&&o("arraybuffer"),t.msstream=!t.fetch&&a&&o("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&i&&o("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!n()&&c(n().overrideMimeType),t.vbArray=c(e.VBArray),r=null}).call(this,r(15))},function(e,t){e.exports=require("inherits")},function(e,t,r){(function(e,n,o){var i=r(20),a=r(21),c=r(23),u=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},s=t.IncomingMessage=function(t,r,a,u){var s=this;if(c.Readable.call(s),s._mode=a,s.headers={},s.rawHeaders=[],s.trailers={},s.rawTrailers=[],s.on("end",(function(){e.nextTick((function(){s.emit("close")}))})),"fetch"===a){if(s._fetchResponse=r,s.url=r.url,s.statusCode=r.status,s.statusMessage=r.statusText,r.headers.forEach((function(e,t){s.headers[t.toLowerCase()]=e,s.rawHeaders.push(t,e)})),i.writableStream){var f=new WritableStream({write:function(e){return new Promise((function(t,r){s._destroyed?r():s.push(new n(e))?t():s._resumeFetch=t}))},close:function(){o.clearTimeout(u),s._destroyed||s.push(null)},abort:function(e){s._destroyed||s.emit("error",e)}});try{return void r.body.pipeTo(f).catch((function(e){o.clearTimeout(u),s._destroyed||s.emit("error",e)}))}catch(e){}}var l=r.body.getReader();!function e(){l.read().then((function(t){if(!s._destroyed){if(t.done)return o.clearTimeout(u),void s.push(null);s.push(new n(t.value)),e()}})).catch((function(e){o.clearTimeout(u),s._destroyed||s.emit("error",e)}))}()}else{if(s._xhr=t,s._pos=0,s.url=t.responseURL,s.statusCode=t.status,s.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===s.headers[r]&&(s.headers[r]=[]),s.headers[r].push(t[2])):void 0!==s.headers[r]?s.headers[r]+=", "+t[2]:s.headers[r]=t[2],s.rawHeaders.push(t[1],t[2])}})),s._charset="x-user-defined",!i.overrideMimeType){var p=s.rawHeaders["mime-type"];if(p){var h=p.match(/;\s*charset=([^;])(;|$)/);h&&(s._charset=h[1].toLowerCase())}s._charset||(s._charset="utf-8")}}};a(s,c.Readable),s.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},s.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{r=new o.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new n(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var i=r.substr(e._pos);if("x-user-defined"===e._charset){for(var a=new n(i.length),c=0;c<i.length;c++)a[c]=255&i.charCodeAt(c);e.push(a)}else e.push(i,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;r=t.response,e.push(new n(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==u.LOADING||!r)break;e.push(new n(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==u.LOADING)break;var s=new o.MSStreamReader;s.onprogress=function(){s.result.byteLength>e._pos&&(e.push(new n(new Uint8Array(s.result.slice(e._pos)))),e._pos=s.result.byteLength)},s.onload=function(){e.push(null)},s.readAsArrayBuffer(r)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,r(19),r(18).Buffer,r(15))},function(e,t){e.exports=require("readable-stream")},function(e,t){e.exports=require("@babel/runtime/helpers/get")},function(e,t){e.exports=require("@babel/runtime/helpers/wrapNativeSuper")},function(e,t){e.exports=require("@babel/runtime/helpers/objectWithoutProperties")},function(e,t){e.exports=require("mime")},function(e,t){e.exports=require("@babel/runtime/helpers/toArray")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("pg")},function(e,t,r){(function(e){var n=r(32),o=r(22),i=r(37),a=r(38),c=r(39),u=t;u.request=function(t,r){t="string"==typeof t?c.parse(t):i(t);var o=-1===e.location.protocol.search(/^https?:$/)?"http:":"",a=t.protocol||o,u=t.hostname||t.host,s=t.port,f=t.path||"/";u&&-1!==u.indexOf(":")&&(u="["+u+"]"),t.url=(u?a+"//"+u:"")+(s?":"+s:"")+f,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var l=new n(t);return r&&l.on("response",r),l},u.get=function(e,t){var r=u.request(e,t);return r.end(),r},u.ClientRequest=n,u.IncomingMessage=o.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=a,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,r(15))},function(e,t,r){(function(t,n,o){var i=r(20),a=r(21),c=r(22),u=r(23),s=r(36),f=c.IncomingMessage,l=c.readyStates;var p=e.exports=function(e){var r,n=this;u.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){n.setHeader(t,e.headers[t])}));var o=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!i.abortController)o=!1,r=!0;else if("prefer-streaming"===e.mode)r=!1;else if("allow-wrong-content-type"===e.mode)r=!i.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");r=!0}n._mode=function(e,t){return i.fetch&&t?"fetch":i.mozchunkedarraybuffer?"moz-chunked-arraybuffer":i.msstream?"ms-stream":i.arraybuffer&&e?"arraybuffer":i.vbArray&&e?"text:vbarray":"text"}(r,o),n._fetchTimer=null,n.on("finish",(function(){n._onFinish()}))};a(p,u.Writable),p.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===h.indexOf(r)&&(this._headers[r]={name:e,value:t})},p.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},p.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},p.prototype._onFinish=function(){var e=this;if(!e._destroyed){var r=e._opts,a=e._headers,c=null;"GET"!==r.method&&"HEAD"!==r.method&&(c=i.arraybuffer?s(t.concat(e._body)):i.blobConstructor?new n.Blob(e._body.map((function(e){return s(e)})),{type:(a["content-type"]||{}).value||""}):t.concat(e._body).toString());var u=[];if(Object.keys(a).forEach((function(e){var t=a[e].name,r=a[e].value;Array.isArray(r)?r.forEach((function(e){u.push([t,e])})):u.push([t,r])})),"fetch"===e._mode){var f=null;if(i.abortController){var p=new AbortController;f=p.signal,e._fetchAbortController=p,"requestTimeout"in r&&0!==r.requestTimeout&&(e._fetchTimer=n.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),r.requestTimeout))}n.fetch(e._opts.url,{method:e._opts.method,headers:u,body:c||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin",signal:f}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){n.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)}))}else{var h=e._xhr=new n.XMLHttpRequest;try{h.open(e._opts.method,e._opts.url,!0)}catch(t){return void o.nextTick((function(){e.emit("error",t)}))}"responseType"in h&&(h.responseType=e._mode.split(":")[0]),"withCredentials"in h&&(h.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in h&&h.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in r&&(h.timeout=r.requestTimeout,h.ontimeout=function(){e.emit("requestTimeout")}),u.forEach((function(e){h.setRequestHeader(e[0],e[1])})),e._response=null,h.onreadystatechange=function(){switch(h.readyState){case l.LOADING:case l.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(h.onprogress=function(){e._onXHRProgress()}),h.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{h.send(c)}catch(t){return void o.nextTick((function(){e.emit("error",t)}))}}}},p.prototype._onXHRProgress=function(){(function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},p.prototype._connect=function(){var e=this;e._destroyed||(e._response=new f(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},p.prototype._write=function(e,t,r){this._body.push(e),r()},p.prototype.abort=p.prototype.destroy=function(){this._destroyed=!0,n.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},p.prototype.end=function(e,t,r){"function"==typeof e&&(r=e,e=void 0),u.Writable.prototype.end.call(this,e,t,r)},p.prototype.flushHeaders=function(){},p.prototype.setTimeout=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var h=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,r(18).Buffer,r(15),r(19))},function(e,t){e.exports=require("base64-js")},function(e,t){e.exports=require("ieee754")},function(e,t){e.exports=require("isarray")},function(e,t){e.exports=require("to-arraybuffer")},function(e,t){e.exports=require("xtend")},function(e,t){e.exports=require("builtin-status-codes")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("socket.io")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("formidable")},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("session-file-store")},function(e,t,r){"use strict";r.r(t),r.d(t,"serve",(function(){return bt})),r.d(t,"sql",(function(){return xt})),r.d(t,"Model",(function(){return Vr})),r.d(t,"string",(function(){return Wt})),r.d(t,"text",(function(){return Kt})),r.d(t,"numeric",(function(){return Gt})),r.d(t,"float",(function(){return Xt})),r.d(t,"integer",(function(){return Qt})),r.d(t,"boolean",(function(){return Zt})),r.d(t,"timestamp",(function(){return er})),r.d(t,"timestamptz",(function(){return tr})),r.d(t,"date",(function(){return rr})),r.d(t,"time",(function(){return nr})),r.d(t,"point",(function(){return or})),r.d(t,"line",(function(){return ir})),r.d(t,"lseg",(function(){return ar})),r.d(t,"path",(function(){return cr})),r.d(t,"polygon",(function(){return ur})),r.d(t,"circle",(function(){return sr})),r.d(t,"list",(function(){return fr})),r.d(t,"json",(function(){return lr})),r.d(t,"serial",(function(){return pr})),r.d(t,"pk",(function(){return hr})),r.d(t,"virtual",(function(){return dr})),r.d(t,"hasMany",(function(){return vr})),r.d(t,"belongsTo",(function(){return mr})),r.d(t,"hasOne",(function(){return yr})),r.d(t,"_public",(function(){return gr})),r.d(t,"_protected",(function(){return br})),r.d(t,"_private",(function(){return wr})),r.d(t,"shared",(function(){return Er})),r.d(t,"stream",(function(){return Pr})),r.d(t,"session",(function(){return Or})),r.d(t,"validate",(function(){return _r})),r.d(t,"include",(function(){return Ar}));var n=r(0),o=r.n(n),i=r(5),a=r.n(i),c=r(1),u=r.n(c),s=r(2),f=r.n(s),l=r(7),p=r.n(l),h=r(9),d=r.n(h),v=r(12),y=r.n(v),m=r(11),g=r.n(m),b=r(16),w=r.n(b),E=r(13),O=r.n(E),_=r(6),A=r(4),P=r.n(A),T=r(17).Pipe,R=Symbol(),S=Symbol(),j=Symbol(),k=function(){function e(){p()(this,e),Object.defineProperty(this,S,{value:{},enumerable:!1,writable:!0}),Object.defineProperty(this,j,{value:{},enumerable:!1,writable:!0}),Object.defineProperty(this,R,{value:[],enumerable:!1,writable:!0})}return d()(e,[{key:"_nowAndOn",value:function(e,t){t.callback=e,e(),t.calls.forEach((function(t){return e.apply(void 0,P()(t))}))}},{key:"nowAndOn",value:function(e,t){var r={events:e,calls:[],callback:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.calls.push(t)}},n=this.on(e);n.observe((function(){r.callback.apply(r,arguments)}));var o=new T(this._nowAndOn,r);return o.onCancel((function(){return n.destroy()})),t&&o.observe(t),o}},{key:"_onArray",value:function(e,t){var r=this;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Object,t=arguments.length>1?arguments[1]:void 0,r=!0,n=!1,o=void 0;try{for(var i,c=entries(e)[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=a()(i.value,2),s=u[0],f=u[1],l=t(s,f,e);if(l===Break)break}}catch(e){n=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw o}}}(t,(function(t,n){return r.on(n,e)}))}},{key:"on",value:function(e,t){var r;return r=Array.isArray(e)?new T([this,this._onArray],e):this.provision(e),t&&r.observe(t),r}},{key:"emit",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Promise.all(this[R].map((function(o){if(r.matches(o.predicate,e))return new Promise((function(r){var i=o.callback(t,e,n);i&&i.then?i.then(r):r()}))})))}},{key:"_provision",value:function(e,t,r){t.callback=e,r.forEach(function(){var t=f()(o.a.mark((function t(r){var n,i,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a()(r,2),i=n[0],c=n[1],t.next=3,e.apply(void 0,P()(i));case 3:c();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"provision",value:function(e){var t=this,r=new Array,n={predicate:e,callback:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise((function(e){r.push([t,e])}))}};this[R].push(n);var o=new T(this._provision,n,r);return o.onCancel((function(){t[R]=t[R].filter((function(e){return e!==n}))})),o}},{key:"of",value:function(t){var r=this;if(this[j][t])return this[j][t];var n=this[j][t]=new e,o=Symbol();return this.on("".concat(t,".*"),(function(e,r,i){if(!i[o]){var a=r.replace("".concat(t,"."),"");n.emit(a,e)}})),n.on("*",(function(e,n){r.emit("".concat(t,".").concat(n),e,u()({},o,!0))})),n}},{key:"matches",value:function(e,t){return t===e||(!(!t.endsWith("*")||!e.startsWith(t.substr(0,t.length-1))&&!e.startsWith("*"))||(!(!t.startsWith("*")||!e.endsWith(t.substr(1))&&!e.endsWith("*"))||(!(!e.endsWith("*")||!t.startsWith(e.substr(0,e.length-1)))||!(!e.startsWith("*")||!t.endsWith(e.substr(1))))))}},{key:"bin",get:function(){return this[R]}}]),e}();"undefined"!=typeof window&&(window.EventEmitter=k);var C={UNCOUNTABLE_WORDS:["equipment","information","rice","money","species","series","fish","sheep","moose","deer","news"],Rules:{SINGULAR_TO_PLURAL:[[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/(m|l)ouse$/gi,"$1ice"],[/(quiz)$/gi,"$1zes"],[/s$/gi,"s"],[/$/g,"s"]],PLURAL_TO_SINGULAR:[[/(m)en$/gi,"$1an"],[/(pe)ople$/gi,"$1rson"],[/(child)ren$/gi,"$1"],[/([ti])a$/gi,"$1um"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/gi,"$2sis"],[/(hive)s$/gi,"$1"],[/(tive)s$/gi,"$1"],[/(curve)s$/gi,"$1"],[/([lr])ves$/gi,"$1f"],[/([^fo])ves$/gi,"$1fe"],[/([^aeiouy]|qu)ies$/gi,"$1y"],[/(s)eries$/gi,"$1eries"],[/(m)ovies$/gi,"$1ovie"],[/(x|ch|ss|sh)es$/gi,"$1"],[/(m|l)ice$/gi,"$1ouse"],[/(bus)es$/gi,"$1"],[/(o)es$/gi,"$1"],[/(shoe)s$/gi,"$1"],[/(cris|ax|test)es$/gi,"$1is"],[/(octop|vir)i$/gi,"$1us"],[/(alias|status)es$/gi,"$1"],[/^(ox)en/gi,"$1"],[/(vert|ind)ices$/gi,"$1ex"],[/(matr)ices$/gi,"$1ix"],[/(quiz)zes$/gi,"$1"],[/s$/gi,""]]},TITLE_LOWERCASE_WORDS:["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],CommonRegExp:{ID_SUFFIX:/(_ids|_id)$/g,UNDERSCORES:/_+/g,NUMBERS:/(^|\s)\d+/g,SPACES:/\s+/g,SPACES_OR_UNDERSCORES:/[\s_]+/g,UPPERCASE:/[A-Z]/g,UNDERSCORE_PREFIX:/^_/},applyRules_:function(e,t,r){if(!(-1!==r.indexOf(e.toLowerCase())))for(var n=0,o=t.length;n<o;++n){var i=t[n];if(i[0].test(e))return i[0].lastIndex=0,e.replace(i[0],i[1]);i[0].lastIndex=0}return e},toPlural:function(e){return C.applyRules_(e,C.Rules.SINGULAR_TO_PLURAL,C.UNCOUNTABLE_WORDS)},toSingular:function(e){return C.applyRules_(e,C.Rules.PLURAL_TO_SINGULAR,C.UNCOUNTABLE_WORDS)},toCamelCase:function(e,t){for(var r=(e=e.toLowerCase()).split(C.CommonRegExp.SPACES_OR_UNDERSCORES),n=!0===t?0:1,o=r.length;n<o;++n){var i=r[n];r[n]=i.charAt(0).toUpperCase()+i.substr(1)}return r.join("")},toPascalCase:function(e){return C.toCamelCase(e,!0)},toTitleCase:function(e){for(var t=(e=e.replace(C.CommonRegExp.UNDERSCORES," ")).split(C.CommonRegExp.SPACES),r=0,n=t.length;r<n;++r){for(var o=t[r].split("-"),i=0,a=o.length;i<a;++i){var c=o[i].toLowerCase();C.TITLE_LOWERCASE_WORDS.indexOf(c)<0&&(o[i]=C.toCapitalized(c))}t[r]=o.join("-")}return e=(e=t.join(" ")).charAt(0).toUpperCase()+e.substr(1)},toUnderscored:function(e){return(e=(e=(e=(e=e.replace(C.CommonRegExp.SPACES_OR_UNDERSCORES,"_")).replace(C.CommonRegExp.UPPERCASE,(function(e){return"_".concat(e)}))).replace(C.CommonRegExp.UNDERSCORES,"_")).replace(C.CommonRegExp.UNDERSCORE_PREFIX,"")).toLowerCase()},toDashed:function(e){return e=e.replace(C.CommonRegExp.SPACES_OR_UNDERSCORES,"-")},toHumanized:function(e,t){return e=(e=(e=e.toLowerCase()).replace(C.CommonRegExp.ID_SUFFIX,"")).replace(C.CommonRegExp.UNDERSCORES," "),t?e:C.toCapitalized(e)},toCapitalized:function(e){return e=(e=e.toLowerCase()).charAt(0).toUpperCase()+e.substr(1)},toTableName:function(e){return e=C.toUnderscored(e),e=C.toPlural(e)},toColumnName:function(e){return e=C.toUnderscored(e)},toClassName:function(e){return e=C.toPascalCase(e),e=C.toSingular(e)},toForeignKeyName:function(e){return e=C.toUnderscored(e),e+="_id"},replaceNumbersWithOrdinals:function(e){return e.replace(C.CommonRegExp.NUMBERS,(function(e){var t=Number(e.slice(-1));if(1!==Number(e.slice(-2,-1))){if(1===t)return e+"st";if(2===t)return e+"nd";if(3===t)return e+"rd"}return e+"th"}))}},x=(C.toPlural,C.toSingular,C.toCamelCase),N=(C.toPascalCase,C.toTitleCase),D=(C.toDashed,C.toUnderscored),L=(C.toHumanized,C.toCapitalized),I=C.toTableName,U=C.toClassName,B=C.toForeignKeyName;C.replaceNumbersWithOrdinals,C.toColumnName;function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M,F={},Y=[Object.prototype,Function.prototype,k.prototype,void 0,null],J=function(e,t){for(var r={},n="function"==typeof e?".":"#",o="function"==typeof e?e.prototype:e.__proto__;!Y.includes(o);o=o.__proto__){var i=o.constructor,a="".concat(i.name).concat(n).concat(t);r=$({},F[a],{},r)}return r},V=function(e,t,r){var n="function"==typeof e?e:e.constructor,o="function"==typeof e?".":"#",i="".concat(n.name).concat(o).concat(t);F[i]=F[i]||{},Object.assign(F[i],$({},r,{className:n.name,key:t}))},H=F,z=r(17),W=r(14),K=r.n(W),G=r(3),X=r.n(G),Q=r(24),Z=r.n(Q),ee=r(25),te=function(e){function t(){var e,r;p()(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=y()(this,(e=g()(t)).call.apply(e,[this].concat(o))),Object.defineProperty(w()(r),"[[patches]]",{enumerable:!1,value:[]}),Object.defineProperty(w()(r),"[[events]]",{enumerable:!1,value:new k}),r}return O()(t,e),d()(t,[{key:"on",value:function(){var e;return(e=this["[[events]]"]).on.apply(e,arguments)}},{key:"emit",value:function(){var e;return(e=this["[[events]]"]).emit.apply(e,arguments)}},{key:"push",value:function(){for(var e,r,n=this.length,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var c=i.map((function(e){return{op:"add",path:"/".concat(n++),value:e}}));(e=this["[[patches]]"]).push.apply(e,P()(c)),this.emit("Δ.change",c),(r=Z()(g()(t.prototype),"push",this)).call.apply(r,[this].concat(i))}},{key:"insert",value:function(e,t){this.splice(t,0,e);var r={op:"add",path:"/".concat(t),value:e};this["[[patches]]"].push(r),this.emit("Δ.change",[r])}},{key:"replace",value:function(e,t){this[e]=t;var r={op:"replace",path:"/".concat(e),value:t};this["[[patches]]"].push(r),this.emit("Δ.change",[r])}},{key:"remove",value:function(e){this.splice(e,1);var t={op:"remove",path:"/".concat(e)};this["[[patches]]"].push(t),this.emit("Δ.change",[t])}}]),t}(r.n(ee)()(Array)),re=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){
/*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017 Joachim Wester
   * MIT license
   */
var r=this&&this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},n=Object.prototype.hasOwnProperty;function o(e,t){return n.call(e,t)}function i(e){if(Array.isArray(e)){for(var t=new Array(e.length),r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(e);t=[];for(var n in e)o(e,n)&&t.push(n);return t}function a(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function c(e,t){var r;for(var n in e)if(o(e,n)){if(e[n]===t)return a(n)+"/";if("object"===X()(e[n])&&""!=(r=c(e[n],t)))return a(n)+"/"+r}return""}function u(e,t){var r=[e];for(var n in t){var o="object"===X()(t[n])?JSON.stringify(t[n],null,2):t[n];void 0!==o&&r.push(n+": "+o)}return r.join("\n")}t.hasOwnProperty=o,t._objectKeys=i,t._deepClone=function(e){switch(X()(e)){case"object":return JSON.parse(JSON.stringify(e),(function(e,t){return Array.isArray(t)?K()(te,P()(t)):t}));case"undefined":return null;default:return e}},t.isInteger=function(e){for(var t,r=0,n=e.length;r<n;){if(!((t=e.charCodeAt(r))>=48&&t<=57))return!1;r++}return!0},t.escapePathComponent=a,t.unescapePathComponent=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},t._getPathRecursive=c,t.getPath=function(e,t){if(e===t)return"/";var r=c(e,t);if(""===r)throw new Error("Object not found in root");return"/"+r},t.hasUndefined=function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var r=0,n=t.length;r<n;r++)if(e(t[r]))return!0}else if("object"===X()(t)){var o=i(t),a=o.length;for(r=0;r<a;r++)if(e(t[o[r]]))return!0}return!1};var s=function(e){function t(t,r,n,o,i){e.call(this,u(t,{name:r,index:n,operation:o,tree:i})),this.name=r,this.index=n,this.operation=o,this.tree=i,this.message=u(t,{name:r,index:n,operation:o,tree:i})}return r(t,e),t}(Error);t.PatchError=s},function(e,t,r){var n={strict:!0},o=r(3),i=function(e,t){return o(e,t,n)},a=r(0);t.JsonPatchError=a.PatchError,t.deepClone=a._deepClone;var c={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){var n=s(r,this.path);n&&(n=a._deepClone(n));var o=f(r,{op:"remove",path:this.from}).removed;return f(r,{op:"add",path:this.path,value:o}),{newDocument:r,removed:n}},copy:function(e,t,r){var n=s(r,this.from);return f(r,{op:"add",path:this.path,value:a._deepClone(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:i(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}},u={add:function(e,t,r){return a.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:c.move,copy:c.copy,test:c.test,_get:c._get};function s(e,t){if(""==t)return e;var r={op:"_get",path:t};return f(e,r),r.value}function f(e,r,n,o,f,l){if(void 0===n&&(n=!1),void 0===o&&(o=!0),void 0===f&&(f=!0),void 0===l&&(l=0),n&&("function"==typeof n?n(r,0,e,r.path):p(r,0)),""===r.path){var h={newDocument:e};if("add"===r.op)return h.newDocument=r.value,h;if("replace"===r.op)return h.newDocument=r.value,h.removed=e,h;if("move"===r.op||"copy"===r.op)return h.newDocument=s(e,r.from),"move"===r.op&&(h.removed=e),h;if("test"===r.op){if(h.test=i(e,r.value),!1===h.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",l,r,e);return h.newDocument=e,h}if("remove"===r.op)return h.removed=e,h.newDocument=null,h;if("_get"===r.op)return r.value=e,h;if(n)throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",l,r,e);return h}o||(e=a._deepClone(e));var d=(r.path||"").split("/"),v=e,y=1,m=d.length,g=void 0,b=void 0,w=void 0;for(w="function"==typeof n?n:p;;){if(b=d[y],f&&"__proto__"==b)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===g&&(void 0===v[b]?g=d.slice(0,y).join("/"):y==m-1&&(g=r.path),void 0!==g&&w(r,0,e,g)),y++,Array.isArray(v)){if("-"===b)b=v.length;else{if(n&&!a.isInteger(b))throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",l,r,e);a.isInteger(b)&&(b=~~b)}if(y>=m){if(n&&"add"===r.op&&b>v.length)throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",l,r,e);if(!1===(h=u[r.op].call(r,v,b,e)).test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",l,r,e);return h}}else if(b&&-1!=b.indexOf("~")&&(b=a.unescapePathComponent(b)),y>=m){if(!1===(h=c[r.op].call(r,v,b,e)).test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",l,r,e);return h}v=v[b]}}function l(e,r,n,o,i){if(void 0===o&&(o=!0),void 0===i&&(i=!0),n&&!Array.isArray(r))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");o||(e=a._deepClone(e));for(var c=new Array(r.length),u=0,s=r.length;u<s;u++)c[u]=f(e,r[u],n,!0,i,u),e=c[u].newDocument;return c.newDocument=e,c}function p(e,r,n,o){if("object"!==X()(e)||null===e||Array.isArray(e))throw new t.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",r,e,n);if(!c[e.op])throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,e,n);if("string"!=typeof e.path)throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",r,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",r,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new t.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",r,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",r,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&a.hasUndefined(e.value))throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",r,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,u=o.split("/").length;if(i!==u+1&&i!==u)throw new t.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",r,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==o)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",r,e,n)}else if("move"===e.op||"copy"===e.op){var s=h([{op:"_get",path:e.from,value:void 0}],n);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new t.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",r,e,n)}}function h(e,r,n){try{if(!Array.isArray(e))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(r)l(a._deepClone(r),a._deepClone(e),n||!0);else{n=n||p;for(var o=0;o<e.length;o++)n(e[o],o,r,void 0)}}catch(e){if(e instanceof t.JsonPatchError)return e;throw e}}t.getValueByPointer=s,t.applyOperation=f,t.applyPatch=l,t.applyReducer=function(e,r,n){var o=f(e,r);if(!1===o.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",n,r,e);return o.newDocument},t.validator=p,t.validate=h},function(e,t,r){
/*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017 Joachim Wester
   * MIT license
   */
var n=r(0),o=r(1),i=r(1);t.applyOperation=i.applyOperation,t.applyPatch=i.applyPatch,t.applyReducer=i.applyReducer,t.getValueByPointer=i.getValueByPointer,t.validate=i.validate,t.validator=i.validator;var a=r(0);t.JsonPatchError=a.PatchError,t.deepClone=a._deepClone,t.escapePathComponent=a.escapePathComponent,t.unescapePathComponent=a.unescapePathComponent;var c=new WeakMap,u=function(e){this.observers=new Map,this.obj=e},s=function(e,t){this.callback=e,this.observer=t};function f(e){var t=c.get(e.object);l(t.value,e.object,e.patches,""),e.patches.length&&o.applyPatch(t.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function l(e,t,r,o){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var i=n._objectKeys(t),a=n._objectKeys(e),c=!1,u=a.length-1;u>=0;u--){var s=e[p=a[u]];if(!n.hasOwnProperty(t,p)||void 0===t[p]&&void 0!==s&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(r.push({op:"remove",path:o+"/"+n.escapePathComponent(p)}),c=!0):(r.push({op:"replace",path:o,value:t}),!0);else{var f=t[p];"object"==X()(s)&&null!=s&&"object"==X()(f)&&null!=f?l(s,f,r,o+"/"+n.escapePathComponent(p)):s!==f&&(!0,r.push({op:"replace",path:o+"/"+n.escapePathComponent(p),value:n._deepClone(f)}))}}if(c||i.length!=a.length)for(u=0;u<i.length;u++){var p=i[u];n.hasOwnProperty(e,p)||void 0===t[p]||r.push({op:"add",path:o+"/"+n.escapePathComponent(p),value:n._deepClone(t[p])})}}}t.unobserve=function(e,t){t.unobserve()},t.observe=function(e,t){var r,o=function(e){return c.get(e)}(e);if(o){var i=function(e,t){return e.observers.get(t)}(o,t);r=i&&i.observer}else o=new u(e),c.set(e,o);if(r)return r;if(r={},o.value=n._deepClone(e),t){r.callback=t,r.next=null;var a=function(){f(r)},l=function(){clearTimeout(r.next),r.next=setTimeout(a)};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l)):(document.documentElement.attachEvent("onmouseup",l),document.documentElement.attachEvent("onkeyup",l),document.documentElement.attachEvent("onmousedown",l),document.documentElement.attachEvent("onkeydown",l),document.documentElement.attachEvent("onchange",l)))}return r.patches=[],r.object=e,r.unobserve=function(){f(r),clearTimeout(r.next),function(e,t){e.observers.delete(t.callback)}(o,r),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l)):(document.documentElement.detachEvent("onmouseup",l),document.documentElement.detachEvent("onkeyup",l),document.documentElement.detachEvent("onmousedown",l),document.documentElement.detachEvent("onkeydown",l)))},o.observers.set(t,new s(t,r)),r},t.generate=f,t.compare=function(e,t){var r=[];return l(e,t,r,""),r}},function(e,t,r){var n=Array.prototype.slice,o=r(5),i=r(4),a=e.exports=function(e,t,r){return r||(r={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=X()(e)&&"object"!=X()(t)?r.strict?e===t:e==t:function(e,t,r){var s,f;if(c(e)||c(t))return!1;if(e.prototype!==t.prototype)return!1;if(i(e))return!!i(t)&&(e=n.call(e),t=n.call(t),a(e,t,r));if(u(e)){if(!u(t))return!1;if(e.length!==t.length)return!1;for(s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}try{var l=o(e),p=o(t)}catch(e){return!1}if(l.length!=p.length)return!1;for(l.sort(),p.sort(),s=l.length-1;s>=0;s--)if(l[s]!=p[s])return!1;for(s=l.length-1;s>=0;s--)if(f=l[s],!a(e[f],t[f],r))return!1;return X()(e)===X()(t)}(e,t,r))};function c(e){return null==e}function u(e){return!(!e||"object"!==X()(e)||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}},function(e,t){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function o(e){return e&&"object"==X()(e)&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=r?n:o).supported=n,t.unsupported=o},function(e,t){function r(e){var t=[];for(var r in e)t.push(r);return t}(e.exports="function"==typeof Object.keys?Object.keys:r).shim=r}]),ne=function(){var e=e||{};e.transform=function(e,r){var n=[];n=n.concat.apply(n,r);var o=JSON.parse(JSON.stringify(e));return n.reduce(t,o)},e.transformAgainstSingleOp=function(e,t){};var t=function(e,t){if(void 0===t.value&&("add"===t.op||"replace"===t.op||"test"===t.op))throw new Error("'value' MUST be defined");if(void 0===t.from&&("copy"===t.op||"move"===t.op))throw new Error("'from' MUST be defined");if(r[t.op])if("function"==typeof r[t.op])r[t.op](t,e);else for(var n=e.length,o=0;o<n;){var i=e[o];o++,r[t.op][i.op]&&r[t.op][i.op](t,i)}return e},r={remove:function(e,t){for(var r,i=t.length,a=0;r=t[a];)("add"!==r.op&&"test"!==r.op||e.path!==r.path)&&(r.from&&(r.from===e.path||0===r.from.indexOf(e.path+"/"))||e.path===r.path||0===r.path.indexOf(e.path+"/"))&&(t.splice(a,1),i--,a--),a++;var c=e.path.lastIndexOf("/");if(c>-1){var u=e.path.substr(c+1),s=e.path.substr(0,c+1);if(o(u))for(i=t.length,a=0;a<i;)r=t[a],a++,0===r.path.indexOf(s)&&(r.path=n(r.path,s,u,-1)),r.from&&0===r.from.indexOf(s)&&(r.from=n(r.from,s,u,-1))}},add:function(e,t){for(var r,i=t.length,a=0;r=t[a];)("add"!==r.op&&"test"!==r.op||e.path!==r.path)&&(r.from&&(r.from===e.path||0===r.from.indexOf(e.path+"/"))||e.path===r.path||0===r.path.indexOf(e.path+"/"))&&(t.splice(a,1),i--,a--),a++;var c=e.path.lastIndexOf("/");if(c>-1){var u=e.path.substr(c+1),s=e.path.substr(0,c+1);if(o(u))for(i=t.length,a=0;a<i;)r=t[a],a++,0===r.path.indexOf(s)&&(r.path=n(r.path,s,u,1)),r.from&&0===r.from.indexOf(s)&&(r.from=n(r.from,s,u,1))}},replace:function(e,t){for(var r,n=0;r=t[n];)(r.from&&(r.from===e.path||0===r.from.indexOf(e.path+"/"))||0===r.path.indexOf(e.path+"/"))&&(t.splice(n,1),n--),n++}};function n(e,t,r,n){var i=e.substr(t.length),a=i.indexOf("/");a>-1||(a=i.length);var c=i.substr(0,a),u=i.substr(a);return o(c)&&n>0&&c>=r||n<0&&c>r?t+(parseInt(c)+n)+u:e}function o(e){var t=~~Number(e);return String(t)===e&&t>=0}return e}(),oe=function(e,t){Object.defineProperty(e,"[[attributes]]",{writable:!0,enumerable:!1,value:t}),Object.defineProperty(e,"[[base]]",{writable:!0,enumerable:!1,value:re.deepClone(t)}),Object.defineProperty(e,"[[patches]]",{writable:!0,enumerable:!1,value:[]}),Object.defineProperty(e,"[[batch]]",{writable:!0,enumerable:!1,value:1}),Object.defineProperty(e,"[[syncRate]]",{writable:!0,enumerable:!1,value:0}),le(e,t),"function"==typeof e.onChange&&e.on("Δ.change",(function(t){return pe(e,"change",t)}))},ie=function(e){var t=[];return e["[[patches]]"].forEach((function(r){var n=!r.staged;r.batchId||(r.batchId=e["[[batch]]"]),n&&(r.staged=!0,t.push(r))})),t},ae=function(e,t){var r;return e&&e["[[patches]]"]?(re.applyPatch(e["[[attributes]]"],t),(r=e["[[patches]]"]).push.apply(r,P()(t)),t):[]},ce=function(e,t){return e["[[patches]]"]=ne.transform(e["[[patches]]"],t),pe(e,"merge",t),fe(e,t)},ue=function(e){return e["[[batch]]"]++},se=function(e,t){var r=e["[[patches]]"].filter((function(e){return e.batchId===t}));return e["[[patches]]"]=e["[[patches]]"].filter((function(e){return e.batchId!==t})),fe(e,r)},fe=function(e,t){re.applyPatch(e["[[base]]"],t);var r=re.deepClone(e["[[base]]"]);return re.applyPatch(r,e["[[patches]]"]),e["[[attributes]]"]=r,le(e,r),t},le=function(e,t){Object(_.b)(t,(function(t,r){r&&r.on&&r.on("Δ.change",(function(r){var n,o=r.map((function(e){return{op:e.op,path:"/".concat(t).concat(e.path),value:e.value}}));(n=e["[[patches]]"]).push.apply(n,P()(o)),e.emit("Δ.change",o)}))}))},pe=function(e,t,r){e.emit("Δ.".concat(t),r);var n="on".concat(L(t));"function"==typeof e[n]&&e[n](r)},he=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p()(this,t),e=y()(this,g()(t).call(this)),oe(w()(e),r),e}return O()(t,e),d()(t,[{key:"set",value:function(e){Object.assign(this,e)}},{key:"uid",get:function(){return void 0!==this.id?"".concat(this.constructor.name,".").concat(this.id):null}},{key:"validation",get:function(){return this["[[validation]]"].for(this)}}]),t}(k);function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Object.defineProperty(he.prototype,"[[validation]]",{writable:!0,enumerable:!1,value:(M={},{for:function(e){e["[[validationState]]"]||Object.defineProperty(e,"[[validationState]]",{enumerable:!1,value:{}});var t=e["[[validationState]]"],r=function(e){return n(e).length>0},n=function(t){var r=M[t];if(void 0!==r){var n=e[t],o=[],i=N(t);return r.forEach((function(t){return t({property:n,label:i,errors:o,resource:e})})),o}return[]},o={addHandler:function(e,t){M[e]=M[e]||[],M[e].push(t)},errorMessageFor:function(e){var t=n(e);if(0===t.length)return" ";if(1===t.length)return"".concat(N(e)," ").concat(t[0]);var r=t.pop();return"".concat(N(e)," ").concat(t.join(", ")," and ").concat(r)},shouldShowErrorsFor:function(e){return!0===t[e]&&r(e)},showErrorsFor:function(r){t[r]=!0,e.emit("Δ.change")},hideErrorsFor:function(e){t[e]=!1},showAllErrors:function(){Object(_.b)(M,(function(e){t[e]=!0})),e.emit("Δ.change")},hideAllErrors:function(){Object(_.b)(M,(function(e){t[e]=!1})),e.emit("Δ.change")},get isInvalid(){var e=!1;return Object(_.b)(M,(function(t){e=e||r(t)})),e},get isValid(){return!o.isInvalid}};return o}})});var ye=["String","Boolean","Number","Date","Function"],me=[Object.prototype,Function.prototype,he.prototype,he,k.prototype,void 0,null],ge=function(e){return"function"==typeof e?["length","name","prototype"]:["constructor","[[attributes]]","[[patches]]","[[base]]","[[batch]]","[[validation]]"]},be=function(e){var t=function e(t,n){for(var o={},u={},s=function(e){Object(_.b)(Object.getOwnPropertyDescriptors(e),(function(t,r){ge(e).includes(t)||(u[t]=n[t],o[t]=r)}))},f=n;!me.includes(f);f=f.__proto__)s(f);return Object(_.g)(u,(function(u,s){var f=o[u],l=J(n,u);return"private"===l.accessLevel?null:we(s,f)?r("".concat(t,"/").concat(u),s,f,l,n,u):Ee(s,f)?e("".concat(t,"/").concat(u),s):Oe(s,f)?i("".concat(t,"/").concat(u),s,f,l,n,u):_e(s,f)?a("".concat(t,"/").concat(u),s,f,l,n,u):Ae(s,f)?c("".concat(t,"/").concat(u),s,f,l,n,u):void 0}))},r=function(e,t){var r=new t;return{name:e,type:"class",className:t.name,classMethods:n(e,t),instanceMethods:ve({},n("".concat(e,"/#"),r),{sync:i("".concat(e,"/#/sync"),r.sync,{},{},r)})}},n=function(e,r){for(var n={},o=function(e){Object(_.b)(Object.getOwnPropertyDescriptors(e),(function(t,r){ge(e).includes(t)||(n[t]=r)}))},u=r;!me.includes(u);u=u.__proto__)o(u);return Object(_.g)(n,(function(n,o){var u=J(r,n);return Ee(o.value,o)?t("".concat(e,"/").concat(n),o.value,o,u,r,n):Oe(o.value,o)?i("".concat(e,"/").concat(n),o.value,o,u,r,n):_e(o.value,o)?a("".concat(e,"/").concat(n),o.value,o,u,r,n):Ae(o.value,o)?c("".concat(e,"/").concat(n),o.value,o,u,r,n):void 0}))},i=function(t,r,n,i,a){var c=i.isShared,u=i.accessLevel,s=i.authCheck,l=i.usesSession;return c?{name:t,type:"shared-function",value:r.toString()}:(e.on(t,function(){var e=f()(o.a.mark((function e(t){var n,i,c,f,p,h,d,v,y;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.args,i=t.uid,c=t.patches,f=t.connection,p=t.send,h=t.onClose,f.cache=f.cache||Se(f),d=function(e,t){l&&f.session.save(),p(je(e,f),t)},v=i?f.cache.getCached(i):"function"==typeof a?a:new a.constructor,c&&ae(v,c),e.t0="private"===u,e.t0){e.next=13;break}if(e.t1="protected"===u,!e.t1){e.next=12;break}return e.next=11,s(f.session,v);case 11:e.t1=!e.sent;case 12:e.t0=e.t1;case 13:if(!e.t0){e.next=15;break}return e.abrupt("return",p({error:!0,message:"You are not authorized to call this method"}));case 15:l&&n.unshift(f.session);try{y=r.apply(v,n)}catch(e){p({error:!0,message:e.message})}y&&y.catch&&y.catch((function(e){return p({error:!0,message:e.message})})),Pe(y)?(y.observe((function(e){return d(e,!0)})),h((function(){return y.destroy()}))):Te(y)?y.then((function(e){return d(e)})):d(y);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),{name:t,type:"remote-function"})},a=function(e,t,r,n,o,a){var c=n.validators;return{name:e,key:a,type:"property",get:i("".concat(e,".get"),r.get||function(){return null},r,n,o),set:i("".concat(e,".set"),r.set||function(){return null},r,n,o),validators:c&&c.map((function(e){return e.toString()}))}},c=function(e,t,r,n,o,i){var a=n.validators;return{name:e,key:i,type:"attribute",value:r.value,validators:a&&a.map((function(e){return e.toString()}))}};return function(e){if(!Ee(e))throw Error("$interface must be a plain JavaScript Object");return t("global",e)}},we=function(e){return"function"==typeof e&&e.prototype instanceof he},Ee=function(e){return e&&e.__proto__===Object.prototype},Oe=function(e){return"function"==typeof e&&!we(e)},_e=function(e,t){return"function"==typeof t.get||"function"==typeof t.set},Ae=function(e,t){return[we,Ee,Oe,_e].every((function(r){return!r(e,t)}))},Pe=function(e){return e&&"function"==typeof e.observe},Te=function(e){return e&&"function"==typeof e.then&&!Pe(e)},Re={},Se=function(e){var t=e.socket,r={};return{cache:function(e){if(Re[e.uid]=Re[e.uid]||{patches:[],branches:[]},ce(e,Re[e.uid].patches),!r[e.uid]){r[e.uid]=e,Re[e.uid].branches.push({socket:t,resource:e}),t.on("".concat(e.uid,".sync"),(function(r){var n=r.batchId,i=r.patches;ae(e,i),o(n),t.emit("".concat(e.uid,".commitBatch"),n)})),e.on("Δ.sync",(function(){ie(e);var t=ue(e);o(t,{includeSelf:!0})}));var n=[];e.on("Δ.commiting",(function(){n.push(P()(Re[e.uid].patches))})),e.on("Δ.commited",(function(){var t=n.shift();Re[e.uid].patches=Re[e.uid].patches.filter((function(e){return!t.includes(e)}))}))}var o=function(r){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.includeSelf,a=void 0!==i&&i,c=se(e,r);(n=Re[e.uid].patches).push.apply(n,P()(c)),Re[e.uid].branches.forEach((function(e){var r=e.socket,n=e.resource;(t!=r||a)&&(ce(n,c),r.emit("".concat(n.uid,".mergePatches"),c))}))};return e},getCached:function(e){return r[e]}}},je=function e(t,r){var n,o=function(t){return e(t,r)};return t?we(t)?{_class_:t.name}:(n=t,ye.includes(n.constructor.name)?t:function(e){return Array.isArray(e)}(t)?t.map((function(e,t){return o(e)})):Ee(t)?Object(_.g)(t,(function(e,t){return o(t)})):function(e){return e instanceof he}(t=r.cache.cache(t))?ve({},Object(_.g)(t["[[attributes]]"],(function(e,n){var i=J(t,e),a=i.accessLevel,c=i.authCheck;return"private"==a?null:"protected"!=a||c(r.session)?o(n):null})),{_proto_:t.constructor.name}):void 0):t},ke=(r(26),{db:null,models:{}});function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ne=function(){var e=f()(o.a.mark((function e(){var t,r,n,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ke.db,r=Object(_.g)(Object(_.e)(Object(_.c)(H,(function(e,t){return"persisted"===t.type})),(function(e,t){return I(t.className)})),(function(e,t){return Object(_.f)(t,(function(e,t){return D(t.key)}))})),e.t0=Me,e.next=5,t.query($e());case 5:if(e.t1=e.sent,n=(0,e.t0)(e.t1),!(i=We(n,r))){e.next=12;break}return console.log("Patching:",i),e.next=12,t.query(i);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(e,t){var r=t.datatype,n=t.typeModifier,o=t.defaultValue,i=t.constraints,a='"'.concat(e,'" ').concat(r);return n&&(a="".concat(a,"(").concat(n,")")),void 0!==o&&(a="".concat(a," DEFAULT ").concat(Le(o))),i&&(a="".concat(a," ").concat(Ie(i))),a},Le=function(e){if(null===e)return"NULL";if("number"==typeof e||"boolean"==typeof e)return e;if("string"==typeof e)return"'".concat(e,"'");if("object"==X()(e)&&e.__proto__==Object.prototype)return"'".concat(JSON.stringify(e),"'::json");if(e instanceof Date)return"NOW()";if(Array.isArray(e))return"'".concat(JSON.stringify(e),"'");throw Error("Variable type cannot be coalesced for sql query: ".concat(e))},Ie=function(e){var t=e.unique,r=e.notNull,n=e.primaryKey,o=e.references,i="";if(t&&(i="".concat(i," UNIQUE ")),r&&(i="".concat(i," NOT NULL ")),n&&(i="".concat(i," PRIMARY KEY ")),o){var a=o.table,c=o.onDelete;i="".concat(i," REFERENCES ").concat(a,"(id) ON DELETE ").concat(Ve.fromJS.toSQL[c]||"SET NULL")}return i},Ue=function(e,t){var r=t.table,n=t.onDelete;return"ADD CONSTRAINT ".concat(e,"_fkey FOREIGN KEY(").concat(e,") REFERENCES ").concat(r,"(id) ON DELETE ").concat(Ve.fromJS.toSQL[n]||"SET NULL")},Be=function(e){return"DROP CONSTRAINT ".concat(e,"_fkey")},qe=function(e){if(!e)return e;var t=e.split("::");return a()(t,1)[0].replace(/'/g,"")},$e=function(){return"\n    SELECT \n        tab.relname as table_name,\n        attr.attname as name,\n        ty.typname as type,\n        attr.atttypmod as type_modifier,\n        con.contype as constraint_type,\n        ref_table.relname as reference_table,\n        con.confdeltype as on_delete,\n        con.confupdtype as on_update,\n        attr.attnotnull as not_null,\n        pg_get_expr(de.adbin, de.adrelid) as default_value\n    FROM\n        pg_class as tab\n        JOIN pg_catalog.pg_namespace as n \n            ON n.oid = tab.relnamespace\n        LEFT JOIN pg_attribute as attr\n            ON tab.oid = attr.attrelid\n        LEFT JOIN pg_type as ty\n            ON attr.atttypid = ty.oid\n        LEFT JOIN pg_attrdef as de\n            ON  \n                tab.oid = de.adrelid\n            AND\n                attr.attnum = de.adnum\n        LEFT JOIN pg_constraint as con \n            ON \n                attr.attrelid = con.conrelid\n            AND\n                attr.attnum = ANY(con.conkey)\n        LEFT JOIN pg_class as ref_table ON con.confrelid = ref_table.oid\n    WHERE \n        tab.relkind = 'r'\n            AND\n        n.nspname = 'public'\n            AND\n        attr.attnum >= 0\n            AND\n        ty.typname IS NOT NULL\n"},Me=function(e){return Object(_.g)(Object(_.e)(e.rows,"table_name"),(function(e,t){return Object(_.g)(Object(_.e)(t,"name"),(function(e,t){return{tableName:t[0].table_name,key:t[0].name,datatype:t[0].type,typeModifier:t[0].type_modifier,defaultValue:qe(t[0].default_value),constraints:xe({notNull:t[0].not_null},Object(_.g)(Object(_.f)(t,Fe),Ye))}}))}))},Fe=function(e,t){var r=t.constraint_type;return ze.fromEnum.toJS[r]?ze.fromEnum.toJS[r]:"details"},Ye=function(e,t){var r=t.reference_table,n=t.on_delete;t.on_update;return"references"!=e||{onDelete:Ve.fromEnum.toJS[n],table:r}},Je=[{enum:"r",sql:"RESTRICT",js:"restrict"},{enum:"a",sql:"NO ACTION",js:"noAction"},{enum:"d",sql:"SET DEFAULT",js:"setDefault"},{enum:"c",sql:"CASCADE",js:"cascade"},{enum:"n",sql:"SET NULL",js:"setNull"}],Ve={fromEnum:{toJS:Object(_.f)(Je,"enum","js"),toSQL:Object(_.f)(Je,"enum","sql")},fromJS:{toEnum:Object(_.f)(Je,"js","enum"),toSQL:Object(_.f)(Je,"js","sql")},fromSQL:{toJS:Object(_.f)(Je,"sql","js"),toEnum:Object(_.f)(Je,"sql","enum")}},He=[{enum:"p",js:"primaryKey"},{enum:"f",js:"references"},{enum:"u",js:"unique"}],ze={fromJS:{toEnum:Object(_.f)(He,"js","enum")},fromEnum:{toJS:Object(_.f)(He,"enum","js")}},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Object,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Object,r=Object(_.h)([].concat(P()(Object.keys(e)),P()(Object.keys(t)))),n=r.map((function(r){return Ke(e,t,r)})).sort((function(e){return!e.startsWith("CREATE TABLE")})).filter((function(e){return e})).join(";\n");return n},Ke=function(e,t,r){var n=et(e,t),o=n.added,i=n.removed;if(o(r))return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array;return'CREATE TABLE "'.concat(e,'" (').concat(Object.values(Object(_.g)(t,De)).join(", "),");")}(r,t[r]);if(i(r))return'DROP TABLE "'.concat(r,'"');var a=Ge(e[r],t[r]);return a?'ALTER TABLE "'.concat(r,'" ').concat(a):void 0},Ge=function(e,t){return Object(_.h)([].concat(P()(Object.keys(e)),P()(Object.keys(t)))).map((function(r){return Xe(e,t,r)})).filter((function(e){return e.length})).join(", ")},Xe=function(e,t,r){var n,o,i=et(e,t),a=i.added,c=i.removed;return a(r)?(n=r,o=t[r],"ADD COLUMN ".concat(De(n,o))):c(r)?function(e){return'DROP COLUMN "'.concat(e,'"')}(r):"SERIAL"===t[r].datatype?[]:Qe(r,e[r],t[r])},Qe=function(e,t,r){var n,o,i=et(t,r),a=(i.added,i.removed),c=i.different,u=new Array;return c("datatype")&&u.push((n=e,o=r.datatype,'ALTER COLUMN "'.concat(n,'" TYPE ').concat(o))),a("defaultValue")?u.push(function(e){return'ALTER COLUMN "'.concat(e,'" DROP DEFAULT')}(e)):c("defaultValue")&&u.push(function(e,t){return'ALTER COLUMN "'.concat(e,'" SET DEFAULT ').concat(Le(t))}(e,r.defaultValue)),(u=[].concat(P()(u),[Ze(e,t.constraints,r.constraints)])).filter((function(e){return e.length})).join(", ")},Ze=function(e,t,r){var n,o=et(t,r),i=o.added,a=o.removed,c=o.different,u=[];return i("primaryKey")&&u.push("ADD CONSTRAINT ".concat(n=e,"_pk PRIMARY KEY(").concat(n,")")),a("primaryKey")&&u.push(function(e){return"DROP CONSTRAINT ".concat(e,"_pk")}(e)),i("notNull")&&u.push(function(e){return'ALTER COLUMN "'.concat(e,'" SET NOT NULL')}(e)),a("notNull")&&u.push(function(e){return'ALTER COLUMN "'.concat(e,'" DROP NOT NULL')}(e)),i("unique")&&u.push(function(e){return"ADD CONSTRAINT ".concat(e,"_unique UNIQUE(").concat(e,")")}(e)),a("unique")&&u.push(function(e){return"DROP CONSTRAINT ".concat(e,"_unique")}(e)),i("references")&&u.push(Ue(e,r.references)),a("references")&&u.push(Be(e)),c("references")&&u.push("".concat(Be(e),";\n ").concat(Ue(e,r.references))),u},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(r){return e[r]&&void 0===t[r]},n=function(r){return void 0===e[r]&&t[r]},o=function(r){return t[r]instanceof Date?"now()"!=e[r]:"boolean"==typeof t[r]?"true"===e[r]!=t[r]:e[r]!=t[r]};return{added:n,removed:r,different:o}},tt=r(10),rt=r.n(tt),nt=r(27),ot=r.n(nt);function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ct=r(29)(),ut=r(30).Client,st=r(31).Server(ct),ft=r(40)(st,{serveClient:!1}),lt=r(41),pt=r(42),ht=r(43);function dt(e){var t={};return e.keys().forEach((function(r){if(!r.includes("__")){var n=r.replace(".js","").split("/").pop(),o=e(r);o[n]&&(t[n]=o[n])}})),t}rt.a.existsSync("./.sessions")||rt.a.mkdirSync("./.sessions"),rt.a.existsSync("./.uploads")||rt.a.mkdirSync("./.uploads");var vt=lt({origin:function(e,t){t(null,e)},credentials:!0}),yt=pt(),mt=r(44),gt=mt({store:new(r(45)(mt))({path:"./.sessions"}),secret:"keyboard cat",resave:!0,saveUninitialized:!0});function bt(e,t){return wt.apply(this,arguments)}function wt(){return(wt=f()(o.a.mark((function e(t,r){var n,i,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="function"==typeof t?dt(t):t,ke.models=t,ke.db=new ut(r),e.next=5,ke.db.connect();case 5:return e.next=7,Ne();case 7:n=new k,i=be(n),c=i(t),ct.use(gt),ct.use(yt),ct.use(vt),ct.get("/init",(function(e,t){return t.json({ok:!0})})),ct.post("/upload",Ot),ct.get("/cdn*",_t),ft.use((function(e,t){return gt(e.request,e.request.res,t)})),ft.on("connection",(function(e){var t=e.request.session,r=0,o={socket:e,session:t};e.use((function(t,i){var c=a()(t,3),u=c[0],s=c[1],f=c[2],l=function(){return null},p=!1,h=!1;n.emit(u,at({},s,{connection:o,send:function(t,n){p?e.emit(h,{value:t}):(p=!0,n?(h="".concat(r++,": ").concat(u),f({value:t,hook:h})):f({value:t}))},onClose:function(e){return l=e}})),e.on("disconnect",(function(){return l()})),i()})),e.emit("interface",c)})),st.listen(8080);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Et,Ot=function(e,t){var r=new ht.IncomingForm,n=[];r.parse(e,(function(e,r,o){for(var i=at({},r,{},o),a=0;a<i.length;a++){var c=i[a],u=c.name.split(".").pop(),s="".concat(At(),".").concat(u);n.push("/cdn/".concat(s)),rt.a.rename(c.path,"".concat("./.uploads","/").concat(s),(function(e){if(e)throw e}))}t.end(JSON.stringify(n))}))},_t=function(e,t){var r=e.url.replace("/cdn","".concat("./.uploads","/")),n=r.split(".").pop(),o=rt.a.statSync(r),i=ot.a.lookup(n);t.writeHead(200,{"Content-Type":i,"Content-Length":o.size}),rt.a.createReadStream(r).pipe(t)},At=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=t.length,n=0;n<12;n++)e+=t.charAt(Math.floor(Math.random()*r));return e},Pt=function(e){return{isLiteral:!0,value:e}},Tt=function(e){return e&&e.isLiteral},Rt=function(e){var t=Object.keys(e).map(D);return{join:function(e){return Pt(t.join(e))}}},St=function(e){var t=Object.values(e).map(Ct);return{join:function(e){return Pt(t.join(e))}}},jt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" = ",r=Object.keys(e).map((function(r){return"".concat(D(r)).concat(t).concat(Ct(e[r]))}));return{join:function(e){return Pt(r.join(e))}}},kt=[],Ct=function(e){return kt.push(e),"$".concat(kt.length)},xt=function(){var e=f()(o.a.mark((function e(t){var r,n,i,a,c,u,s,f,l=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=l[i];return a=t.reduce((function(e,t,r){return 0===r?"".concat(t):Tt(n[r-1])?"".concat(e).concat(n[r-1].value).concat(t):"".concat(e).concat(Ct(n[r-1])).concat(t)}),""),c=Nt(a),console.log(c,kt),u=ke.db.query(c,kt),kt=[],e.next=8,u;case 8:return s=e.sent,f=Object(_.a)(s.rows,(function(e){if(e&&e.__class__){var t=ke.models[e.__class__],r=new t;return new t(Object(_.f)(e,(function(e){return x(e)}),(function(e,t){var n=J(r,e).sqlDecode;return n?n(t):t})))}return Array.isArray(e)?e.filter((function(e){return null!==e.id})):e})),e.abrupt("return",f);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Nt(e){Et||(Et=Object(_.g)(Object(_.e)(Object(_.c)(H,(function(e,t){return null!=t.type})),"className"),(function(e,t){return Object(_.f)(t,"key")})));for(var t={},r=t,n="",o=!1,i=e,a=Symbol(),c=0;c<e.length;c++){var s=e[c];!1!==o?qt(s)||("{"!=s?"}"!=s?","!=s?n+=s:(n.length&&(r[n]=!0),n=""):(n.length&&(r[n]=!0),r===t?(i=i.slice(0,o)+Lt(t,i.slice(c+1)),o=!1,r=t={}):r=r[a],n=""):(r[n]=u()({},a,r),r=r[n],n="")):"{"==s&&(o=c)}return i}var Dt=Symbol();function Lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=Object.keys(e);if(r.length>1)throw Error("Cannot select ".concat(r.join(", ")," simultaneously"));var n=a()(r,1),o=n[0],i=U(o),c=e[o],u=It(i,c),s=Ut(i,c),f=t.split("ORDER BY"),l=a()(f,2),p=l[0],h=l[1],d=void 0===h?"":h;return d&&(d="ORDER BY ".concat(d)),"".concat(u," FROM ").concat(o," ").concat(s," ").concat(p,' GROUP BY "').concat(o,'".id ').concat(d)}function It(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.label,o=void 0!==n&&n,i=r.alias,a=void 0!==i&&i,c=r.nested,u=void 0!==c&&c,s=[],f=Et[e],l=a||I(e);return s.push(o?"'id', \"".concat(l,'".id'):'"'.concat(l,'".id'),o?"'__class__', '".concat(e,"'"):"'".concat(e,"' as __class__")),Object(_.b)(t,(function(r,n){var i="boolean"==typeof n;switch(f[r].type){case"persisted":if(!i)throw Error("Cannot select subfields of property ".concat(e,"#").concat(r));s.push(o?"'".concat(D(r),"', \"").concat(l,'".').concat(D(r)):'"'.concat(l,'".').concat(D(r)));break;case"relationship":if(i)throw Error("Must select subfields for relation ".concat(e,"#").concat(r));var c,p=f[r],h=p.options,d=p.joinType,v=U(h.a||h.an||h.of||r);switch(d){case"belongsTo":case"hasOne":c="(array_agg(json_build_object(".concat(It(v,n,{label:!0,alias:r,nested:!0}),")))[1]");break;case"hasMany":c="array_agg(json_build_object(".concat(It(v,n,{label:!0,alias:r,nested:!0}),"))")}u?(Object.defineProperty(t,Dt,{enumerable:!1,value:!0}),s.push(o?"'".concat(D(r),"', \"").concat(l,'".').concat(D(r)):D(r))):s.push(o?"'".concat(D(r),"', ").concat(c):"".concat(c," as ").concat(D(r)));break;case"virtual":if(!i)throw Error("Cannot select subfields of property ".concat(e,"#").concat(r));var y=f[r],m=y.definition,g=y.defaultValue,b={};m(Bt(e,b,{nested:u,alias:a}));var w=Object(_.d)(b,(function(t){return"relationship"===Et[e][t].type}));if(u&&w)Object.defineProperty(t,Dt,{enumerable:!1,value:!0}),s.push(o?"'".concat(D(r),"', \"").concat(l,'".').concat(D(r)):D(r));else{var E=m(Bt(e,t,{nested:u,alias:a}));void 0!==g&&(E="COALESCE(".concat(E,", ").concat(Mt(g),")")),s.push(o?"'".concat(D(r),"', ").concat(E):"".concat(E," as ").concat(D(r)))}}})),s.join(", ")}function Ut(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(r.label,r.alias),o=void 0!==n&&n,i=(r.nested,[]);return Object(_.b)(t,(function(t,r){var n,c=t,s=Et[e],f=s[t],l=f.type,p=f.options,h=e;if("relationship"===l){if("boolean"==typeof r)throw Error("Must select subfields for relation ".concat(e,"#").concat(t));if(p.through){var d={};for(p.through(Bt(e,d));;){var v=Object.keys(d);if($t(d[t=a()(v,1)[0]]))break;var y=s[t],m=y.options;y.joinType;i.push(Ut(h,u()({},t,{}))),d=d[t],h=U(m.a||m.an||m.of||t),s=Et[h],o=t}}var g=s[t];p=g.options,n=g.joinType;var b=o||I(h),w=U(p.a||p.an||p.of||t),E=p.as||h;switch(n){case"belongsTo":r[B(t)]=!0,i.push(r[Dt]?"LEFT JOIN (\n                                        SELECT ".concat(Lt(u()({},I(w),r)),"\n                                    ) as ").concat(c," ON ").concat(b,".").concat(B(t)," = ").concat(I(c),".id"):"LEFT JOIN ".concat(I(w)," as ").concat(c," ON ").concat(b,".").concat(B(t)," = ").concat(I(c),".id"));break;case"hasOne":case"hasMany":r[B(E)]=!0,i.push(r[Dt]?"LEFT JOIN (\n                                    SELECT ".concat(Lt(u()({},I(w),r)),"\n                                ) as ").concat(c," ON ").concat(c,".").concat(B(E)," = ").concat(b,".id"):"LEFT JOIN ".concat(I(w)," as ").concat(c," ON ").concat(c,".").concat(B(E)," = ").concat(b,".id"))}}})),i.join(", ")}function Bt(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.nested,o=r.alias,i=o||I(e),a={toString:function(){return i}},c=Et[e];return Object(_.b)(c,(function(e,r){Object.defineProperty(a,e,{get:function(){switch(c[e].type){case"persisted":return t[e]=t[e]||!0,'"'.concat(i,'".').concat(D(e));case"relationship":var r=c[e].options,o=U(r.a||r.an||r.of||e);return t[e]=t[e]||{},Bt(o,t[e],{nested:!0,alias:e});case"virtual":var u=c[e],s=u.definition,f=u.defaultValue;return n?(s(a),'"'.concat(i,'".').concat(D(e))):void 0!==f?"COALESCE(".concat(s(a),", ").concat(f,")"):s(a)}}})})),a}function qt(e){return/\s/.test(e)}function $t(e){return 0===Object.keys(e).length}var Mt=function(e){if(null===e)return"NULL";if("number"==typeof e||"boolean"==typeof e)return e;if("string"==typeof e)return"'".concat(e,"'");if("object"==X()(e)&&e.__proto__==Object.prototype)return"'".concat(JSON.stringify(e),"'::json");if(e instanceof Date)return"NOW()";throw Error("Variable type cannot be coalesced for sql query: ".concat(e))},Ft=r(8),Yt=r.n(Ft),Jt=r(28),Vt=r.n(Jt);function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Wt=Tr((function(e){return{datatype:"varchar",constraints:e.decoratorArgs[1]||{}}})),Kt=Tr((function(e){return{datatype:"text",constraints:e.decoratorArgs[1]||{}}})),Gt=Tr((function(e){return{datatype:"numeric",constraints:e.decoratorArgs[1]||{}}})),Xt=Tr((function(e){return{datatype:"float8",constraints:e.decoratorArgs[1]||{}}})),Qt=Tr((function(e){return{datatype:"int4",constraints:e.decoratorArgs[1]||{}}})),Zt=Tr((function(e){return{datatype:"bool",constraints:e.decoratorArgs[1]||{}}})),er=Tr((function(e){return{datatype:"timestamp",constraints:e.decoratorArgs[1]||{}}})),tr=Tr((function(e){return{datatype:"timestamptz",constraints:e.decoratorArgs[1]||{}}})),rr=Tr((function(e){return{datatype:"date",constraints:e.decoratorArgs[1]||{}}})),nr=Tr((function(e){return{datatype:"time",constraints:e.decoratorArgs[1]||{}}})),or=Tr((function(e){return{datatype:"point",constraints:e.decoratorArgs[1]||{}}})),ir=Tr((function(e){return{datatype:"line",constraints:e.decoratorArgs[1]||{}}})),ar=Tr((function(e){return{datatype:"lseg",constraints:e.decoratorArgs[1]||{}}})),cr=Tr((function(e){return{datatype:"path",constraints:e.decoratorArgs[1]||{}}})),ur=Tr((function(e){return{datatype:"polygon",constraints:e.decoratorArgs[1]||{}}})),sr=Tr((function(e){return{datatype:"circle",constraints:e.decoratorArgs[1]||{}}})),fr=Tr((function(e){return{datatype:"json",constraints:e.decoratorArgs[1]||{},sqlEncode:function(e){return JSON.stringify(e)},sqlDecode:function(e){try{return JSON.parse(e)}catch(t){return e}}}})),lr=Tr((function(e){return{datatype:"json",constraints:e.decoratorArgs[1]||{},sqlEncode:function(e){return JSON.stringify(e)},sqlDecode:function(e){try{return JSON.parse(e)}catch(t){return e}}}})),pr=Tr((function(e){return{datatype:"SERIAL",constraints:e.decoratorArgs[0]||{}}})),hr=pr({primaryKey:!0}),dr=Rr((function(e){var t=a()(e.decoratorArgs,1)[0],r=e.target,n=e.key,o=e.fieldValue;return e.isMethod||Object.defineProperty(r,n,Sr(n)),{isShared:!0,type:"virtual",definition:t,defaultValue:o}})),vr=Rr((function(e){var t=a()(e.decoratorArgs,1)[0],r=void 0===t?{}:t,n=e.target,o=e.key,i=e.fieldValue;return Object.defineProperty(n,o,Sr(o)),{isShared:!0,type:"relationship",joinType:"hasMany",options:r,defaultValue:i}})),yr=Rr((function(e){var t=a()(e.decoratorArgs,1)[0],r=void 0===t?{}:t,n=e.target,o=e.key,i=e.fieldValue;return Object.defineProperty(n,o,Sr(o)),{isShared:!0,type:"relationship",joinType:"hasOne",options:r,defaultValue:i}})),mr=Rr((function(e){var t=a()(e.decoratorArgs,1)[0],r=void 0===t?{}:t,n=e.target,o=e.key,i=e.fieldValue,c=x(B(o));return V(n,c,{type:"persisted",datatype:"int4",isShared:!0}),Object.defineProperty(n,o,Sr(o)),Object.defineProperty(n,c,Sr(c)),{isShared:!0,type:"relationship",joinType:"belongsTo",options:r,defaultValue:i}})),gr=Rr((function(e){e.decoratorArgs,e.fieldValue;return{accessLevel:"public"}})),br=Rr((function(e){var t=e.decoratorArgs;e.fieldValue;return{accessLevel:"protected",authCheck:t[0]}})),wr=Rr((function(e){e.decoratorArgs,e.fieldValue;return{accessLevel:"private"}})),Er=Rr((function(e){e.decoratorArgs,e.fieldValue;return{isShared:!0}})),Or=Rr((function(e){e.decoratorArgs,e.fieldValue;return{usesSession:!0}})),_r=Rr((function(e){var t=e.decoratorArgs,r=e.target,n=e.key;e.fieldValue;return t.forEach((function(e){return r.validation.addHandler(n,e)})),{validators:t}})),Ar=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){Object(_.f)(t,"name");jr((function(e){var r="function"==typeof e?e:e.constructor,n="function"==typeof e?e.prototype:e;Object(_.b)(t,(function(e,t){Object(_.b)(Object.getOwnPropertyDescriptors(t),(function(e,n){if("name"!=e&&"prototype"!=e&&"length"!=e){var o=J(t,e);kr(o)||V(r,e,o),Object.defineProperty(r,e,n)}})),Object(_.b)(Object.getOwnPropertyDescriptors(t.prototype),(function(e,r){if("constructor"!==e){var o=J({__proto__:{constructor:t}},e);kr(o)||V(n,e,o),Object.defineProperty(n,e,r)}}))}))}))(e)}},Pr=function(e){var t;(t=function(e){var t=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return e.call.apply(e,[this].concat(n))};return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return K()(z.Pipe,[[this,t]].concat(r))}},function(e){var r;switch(e.kind){case"field":r="function"==typeof e.initializer?e.initializer:function(){return null},e.initializer=function(){return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];t((function(){return r.apply(void 0,n)}))}};break;case"method":r=e.descriptor.value,e.descriptor.value=t(r)}return e})(e)};function Tr(e){var t=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return delete(t=jr((function(t,n,o){V(t,n,zt({isShared:!0,type:"persisted",defaultValue:o},e({decoratorArgs:r,target:t,key:n,fieldValue:o})))}))(t)).initializer,delete t.descriptor.value,delete t.descriptor.writable,zt({},t,{kind:"method",placement:"prototype",descriptor:zt({},t.descriptor,{},Sr(t.key))})};return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r[0]&&r[0].descriptor&&r[0].kind?t(r[0]):function(e){return t(e,r)}}}function Rr(e){var t=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];jr((function(t,n,o,i){return V(t,n,zt({},e({decoratorArgs:r,target:t,key:n,fieldValue:o,isMethod:i})))}))(t)};return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r[0]&&r[0].descriptor&&r[0].kind?t(r[0]):function(e){return t(e,r)}}}function Sr(e){return{enumerable:!0,get:new Function("\n            return this['[[attributes]]'].".concat(e,"\n        ")),set:new Function("value","\n            this['[[attributes]]'].".concat(e," = value\n            let patch = {\n                op: 'replace',\n                path: '/").concat(e,"',\n                value\n            }\n            this['[[patches]]'].push(patch)\n            this.emit('Δ.change', [ patch ])\n        "))}}function jr(e){return function(t){var r=t.finisher,n=t.initializer;return t.finisher=function(o){var i;switch("function"==typeof r&&r(o),t.placement){case"class":e(o);break;case"static":i="field"===t.kind&&"function"==typeof n?n():void 0,e(o,t.key,i);break;default:i="field"===t.kind&&"function"==typeof n?n():void 0,e(o.prototype,t.key,i,"method"===t.kind)}},t}}var kr=function(e){return 0===Object.keys(e).length};function Cr(){var e=Yt()(["\n            DELETE FROM "," WHERE true\n        "]);return Cr=function(){return e},e}function xr(){var e=Yt()(["\n            SELECT {\n                "," {\n                    ","\n                }\n            }\n            WHERE (",") \n            ORDER BY ",".id ASC\n        "]);return xr=function(){return e},e}function Nr(){var e=Yt()(["\n            SELECT {\n                "," {\n                    ","\n                }\n            }\n            WHERE (",") \n            ORDER BY ",".id ASC\n        "]);return Nr=function(){return e},e}function Dr(){var e=Yt()(["\n            SELECT {\n                "," {\n                    ","\n                }\n            }\n            ORDER BY ",".id ASC\n        "]);return Dr=function(){return e},e}function Lr(){var e=Yt()(["\n            DELETE FROM "," WHERE id = ","\n        "]);return Lr=function(){return e},e}function Ir(){var e=Yt()(["\n            UPDATE "," \n            SET ","\n            WHERE id = ","\n        "]);return Ir=function(){return e},e}function Ur(){var e=Yt()(["\n            SELECT {\n                "," {\n                    ","\n                }\n            }\n            WHERE ",".id = ","\n        "]);return Ur=function(){return e},e}function Br(){var e=Yt()(["\n            INSERT INTO "," (",") \n            VALUES (",")\n            RETURNING id\n        "]);return Br=function(){return e},e}function qr(e){var t,r=Jr(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var n={kind:"field"===e.kind?"field":"method",key:r,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(n.decorators=e.decorators),"field"===e.kind&&(n.initializer=e.value),n}function $r(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function Mr(e){return e.decorators&&e.decorators.length}function Fr(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function Yr(e,t){var r=e[t];if(void 0!==r&&"function"!=typeof r)throw new TypeError("Expected '"+t+"' to be a function");return r}function Jr(e){var t=function(e,t){if("object"!==X()(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==X()(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===X()(t)?t:String(t)}var Vr=function(e,t,r,n){var o=function(){(function(){return e});var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(r){t.forEach((function(t){t.kind===r&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var r=e.prototype;["method","field"].forEach((function(n){t.forEach((function(t){var o=t.placement;if(t.kind===n&&("static"===o||"prototype"===o)){var i="static"===o?e:r;this.defineClassElement(i,t)}}),this)}),this)},defineClassElement:function(e,t){var r=t.descriptor;if("field"===t.kind){var n=t.initializer;r={enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:void 0===n?void 0:n.call(e)}}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[],n=[],o={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,o)}),this),e.forEach((function(e){if(!Mr(e))return r.push(e);var t=this.decorateElement(e,o);r.push(t.element),r.push.apply(r,t.extras),n.push.apply(n,t.finishers)}),this),!t)return{elements:r,finishers:n};var i=this.decorateConstructor(r,t);return n.push.apply(n,i.finishers),i.finishers=n,i},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&-1!==n.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");n.push(e.key)},decorateElement:function(e,t){for(var r=[],n=[],o=e.decorators,i=o.length-1;i>=0;i--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var c=this.fromElementDescriptor(e),u=this.toElementFinisherExtras((0,o[i])(c)||c);e=u.element,this.addElementPlacement(e,t),u.finisher&&n.push(u.finisher);var s=u.extras;if(s){for(var f=0;f<s.length;f++)this.addElementPlacement(s[f],t);r.push.apply(r,s)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){for(var r=[],n=t.length-1;n>=0;n--){var o=this.fromClassDescriptor(e),i=this.toClassDescriptor((0,t[n])(o)||o);if(void 0!==i.finisher&&r.push(i.finisher),void 0!==i.elements){e=i.elements;for(var a=0;a<e.length-1;a++)for(var c=a+1;c<e.length;c++)if(e[a].key===e[c].key&&e[a].placement===e[c].placement)throw new TypeError("Duplicated element ("+e[a].key+")")}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){if(void 0!==e)return Vt()(e).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var r=Jr(e.key),n=String(e.placement);if("static"!==n&&"prototype"!==n&&"own"!==n)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+n+'"');var o=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var i={kind:t,key:r,placement:n,descriptor:Object.assign({},o)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),i.initializer=e.initializer),i},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:Yr(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var r=Yr(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(void 0!==n){if("function"!=typeof n)throw new TypeError("Finishers must return a constructor.");e=n}}return e},disallowProperty:function(e,t,r){if(void 0!==e[t])throw new TypeError(r+" can't have a ."+t+" property.")}};return e}();if(n)for(var i=0;i<n.length;i++)o=n[i](o);var a=t((function(e){o.initializeInstanceElements(e,c.elements)}),r),c=o.decorateClass(function(e){for(var t=[],r=function(e){return"method"===e.kind&&e.key===i.key&&e.placement===i.placement},n=0;n<e.length;n++){var o,i=e[n];if("method"===i.kind&&(o=t.find(r)))if(Fr(i.descriptor)||Fr(o.descriptor)){if(Mr(i)||Mr(o))throw new ReferenceError("Duplicated methods ("+i.key+") can't be decorated.");o.descriptor=i.descriptor}else{if(Mr(i)){if(Mr(o))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+i.key+").");o.decorators=i.decorators}$r(i,o)}else t.push(i)}return t}(a.d.map(qr)),e);return o.initializeClassElements(a.F,c.elements),o.runClassFinishers(a.F,c.finishers)}(null,(function(e){var t,r,n;return{F:function t(){p()(this,t),e(this)},d:[{kind:"field",decorators:[hr],key:"id",value:void 0},{kind:"field",static:!0,key:"events",value:function(){return new k}},{kind:"method",static:!0,key:"create",value:(n=f()(o.a.mark((function e(t){var r,n,i,c,u,s,f=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:null,n=this.relation,i=this.fieldsFrom(t),e.next=5,xt(Br(),n,Rt(i).join(", "),St(i).join(", "));case 5:return c=e.sent,u=a()(c,1),s=u[0].id,this.events.emit("create"),e.next=11,this.read(s,r);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{kind:"method",decorators:[Pr],static:!0,key:"read",value:o.a.mark((function e(t){var r,n,i,c,u,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(r=s.length>1&&void 0!==s[1]?s[1]:null)&&(r=this.defaultSelectedColumns),e.next=4,this.events.nowAndOn(["delete.".concat(t)]);case 4:return n=this.relation,e.next=7,xt(Ur(),n,Pt(r),n,t);case 7:return i=e.sent,c=a()(i,1),u=c[0],e.abrupt("return",u);case 11:case"end":return e.stop()}}),e,this)}))},{kind:"method",key:"update",value:(r=f()(o.a.mark((function e(){var t,r,n,i,a=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},Object.assign(this,t),r=this.constructor.relation,n=this.constructor.fieldsFrom(this),Hr(this,"commiting",this),e.next=7,xt(Ir(),r,jt(n).join(", "),this.id);case 7:return i=e.sent,Hr(this,"commited",this),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{kind:"method",key:"delete",value:function(){var e=this.constructor.relation,t=xt(Lr(),e,this.id);return this.constructor.events.emit("delete.".concat(this.id)),t}},{kind:"method",decorators:[Pr],static:!0,key:"list",value:o.a.mark((function e(){var t,r,n=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=n.length>0&&void 0!==n[0]?n[0]:null)&&(t=this.defaultSelectedColumns),e.next=4,this.events.nowAndOn("*");case 4:return r=this.relation,e.abrupt("return",xt(Dr(),r,Pt(t),r));case 6:case"end":return e.stop()}}),e,this)}))},{kind:"method",decorators:[Pr],static:!0,key:"where",value:o.a.mark((function e(t){var r,n,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:null,n=this.relation,null==r&&(r=this.defaultSelectedColumns),e.next=5,this.events.nowAndOn("*");case 5:return e.abrupt("return",xt(Nr(),n,Pt(r),jt(t).join(" AND "),n));case 6:case"end":return e.stop()}}),e,this)}))},{kind:"method",decorators:[Pr],static:!0,key:"search",value:o.a.mark((function e(t){var r,n,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:null,n=this.relation,null==r&&(r=this.defaultSelectedColumns),e.next=5,this.events.nowAndOn("*");case 5:return e.abrupt("return",xt(xr(),n,Pt(r),jt(t,"LIKE").join(" OR "),n));case 6:case"end":return e.stop()}}),e,this)}))},{kind:"method",static:!0,key:"truncate",value:(t=f()(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.relation,e.abrupt("return",xt(Cr(),t));case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{kind:"get",static:!0,key:"defaultSelectedColumns",value:function(){return Object.keys(this.persistedFields).join(",\n")}},{kind:"get",static:!0,key:"relation",value:function(){return Pt(I(this.name))}},{kind:"get",static:!0,key:"persistedFields",value:function(){var e=this;return Object(_.f)(Object(_.c)(H,(function(t,r){return r.className===e.name&&"persisted"===r.type})),"key")}},{kind:"method",static:!0,key:"fieldsFrom",value:function(e){var t=new this,r=this.persistedFields,n={};return Object(_.b)(r,(function(r){if(void 0!==e[r]){var o=J(t,r).sqlEncode;n[r]=o?o(e[r]):e[r]}})),n}}]}})),Hr=function(e,t,r){e.emit("Δ.".concat(t),r);var n="on".concat(toCapitalized(t));"function"==typeof e[n]&&e[n](r)}}]);