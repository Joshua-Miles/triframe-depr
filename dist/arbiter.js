!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("@babel/runtime/helpers/typeof")},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));n(4),n(0),n(1);var r=n(7),o=n.n(r),i=function(e){return e?"function"==typeof e.entries?e.entries():Object.entries(e):[]},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Object,t=arguments.length>1?arguments[1]:void 0,n=!0,r=!1,a=void 0;try{for(var c,u=i(e)[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var s=o()(c.value,2),f=s[0],p=s[1],l=t(f,p,e);if("_break"===l)break}}catch(e){r=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw a}}},c=function(e,t){var n=new Object;return a(e,(function(r,o){n[r]=t(r,o,e)})),Array.isArray(e)?Object.values(n):n}},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@babel/runtime/helpers/slicedToArray")},function(e,t){e.exports=require("@babel/runtime/helpers/createClass")},function(e,t){e.exports=require("@babel/runtime/helpers/getPrototypeOf")},function(e,t){e.exports=require("@babel/runtime/helpers/possibleConstructorReturn")},function(e,t){e.exports=require("@babel/runtime/helpers/inherits")},function(e,t){e.exports=require("@babel/runtime/helpers/assertThisInitialized")},function(e,t){e.exports=require("@babel/runtime/helpers/construct")},function(e,t,n){"use strict";n.r(t),n.d(t,"Pipe",(function(){return E}));var r=n(4),o=n.n(r),i=n(7),a=n.n(i),c=n(0),u=n.n(c),s=n(3),f=n.n(s),p=n(1),l=n.n(p),h=n(6),v=n.n(h),d=n(8),m=n.n(d),y=n(2),b=n.n(y),g=n(5),O=Symbol(),w=Symbol(),E=function(){function e(t){var n,r=this;v()(this,e),b()(this,"listeners",[]),b()(this,"observers",[]),b()(this,"dependencies",[]),b()(this,"errorHandlers",[]),b()(this,"cancelationHandlers",[]),b()(this,"executions",[]),b()(this,"currentValue",w),b()(this,"resources",{}),b()(this,"emit",function(){var e=l()(u.a.mark((function e(){var t,n,o,i,a,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=c.length,n=new Array(t),o=0;o<t;o++)n[o]=c[o];return r.currentValue=n[0],i=f()(r.listeners),a=f()(r.observers),r.listeners=[],e.next=7,Promise.all([].concat(f()(i.map((function(e){return e.apply(void 0,n)}))),f()(a.map((function(e){return e.apply(void 0,n)})))));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),b()(this,"throwError",(function(e){r.currentValue=e,r.errorHandlers.forEach((function(t){return t(e)}))})),b()(this,O,l()(u.a.mark((function e(){var t,n,o,i,a,c,s,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!1,o=function(){return n=!0},i=0,r.executions.push(o),(a=function(){if(!n){for(;r.executions.length&&r.executions[0]!=o;){var e=r.executions.shift();e()}r.executions.shift(),r.emit.apply(r,arguments)}}).throw=r.throwError,a.pipe=r;try{t=(c=r.process).call.apply(c,[r.thisArg,a].concat(f()(r.args)))}catch(e){r.throwError(e)}if(s=function e(o){var c=o.value,s=o.done;i++;var f,h=r.constructor,v=h.isPipe,d=h.isPromise,m=(h.isObservable,r.cached),y=r.cache,b=m(c),g=r.getCachedResource(c,i),O=function(n){return t.throw?e(t.throw(n)):r.throwError(n)};if(!s||void 0!==c)return f=s?function(){return!n&&a.apply(void 0,arguments)}:function(){return!n&&p.apply(void 0,arguments)},new Promise(l()(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=9;break}if(!(b.currentValue instanceof Error)){e.next=5;break}O(b.currentValue),e.next=7;break;case 5:return e.next=7,f(b.currentValue);case 7:e.next=27;break;case 9:if(!g){e.next=14;break}return e.next=12,f(g);case 12:e.next=27;break;case 14:if(!v(c)){e.next=19;break}r.dependencies.push(c),c.apply((function(e){y(c),f(e)}),(function(e){y(c),O(e)})),e.next=27;break;case 19:if(!d(c)){e.next=24;break}return e.next=22,c.then(f).catch((function(e){return O(e)}));case 22:e.next=27;break;case 24:return s||r.cacheResource(c,i),e.next=27,f(c);case 27:case"end":return e.stop()}}),e)}))))},p=function(e){try{e=t.next(e),s(e)}catch(e){r.throwError(e)}},!t||"function"!=typeof t.next){e.next=15;break}return e.next=13,p();case 13:e.next=17;break;case 15:return e.next=17,s({value:t,done:!0});case 17:case"end":return e.stop()}}),e)})))),b()(this,"cache",(function(e){var t=function(e){!r.observers.length&&!r.listeners.length||r.isCanceled||r[O]()};e.catch(t),e.observe(t),r.onCancel((function(){return e.unobserve(t)}))})),b()(this,"cached",(function(e){var t=r.dependencies.find((function(t){return t.isEqual(e)}));if(t)return t!==e&&e.destroy(),t})),b()(this,"getCachedResource",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.uid||"".concat(JSON.stringify(e),".").concat(t);return r.resources[n]})),b()(this,"isEqual",(function(e){return e&&e.process==r.process&&JSON.stringify(e.args)===JSON.stringify(r.args)&&(e.thisArg==r.thisArg||!e.thisArg||!r.thisArg||r.thisArg.id==e.thisArg.id)})),Array.isArray(t)&&(n=t[0],t=t[1]),this.process=t,this.thisArg=n;for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];this.args=i,setTimeout((function(){r.alreadyInitialized||r.isCanceled||r[O]()}))}return m()(e,[{key:"observe",value:function(e){return this.cachedValue&&e(this.cachedValue),this.observers.push(e),this}},{key:"unobserve",value:function(e){this.observers=this.observers.filter((function(t){return t!=e})),0==this.observers.length&&this.destroy()}},{key:"then",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(this.currentValue!==w)return this.currentValue instanceof Error?n(this.currentValue):e(this.currentValue);var r=function e(r){t.errorHandlers=t.errorHandlers.filter((function(t){return t!=e})),n(r)};this.catch(r);var o=function(){return o=!0};return this.listeners.push(function(){var n=l()(u.a.mark((function n(){var i=arguments;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.errorHandlers=t.errorHandlers.filter((function(e){return e!=r})),!0===o){n.next=4;break}return n.next=4,e.apply(void 0,i);case 4:o();case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()),new Promise((function(e){return!0===o?e():o=e}))}},{key:"catch",value:function(e){this.errorHandlers.push(e)}},{key:"onCancel",value:function(e){this.cancelationHandlers.push(e)}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.currentValue!=w?this.currentValue instanceof Error?t(this.currentValue):e(this.currentValue):(this.then(e,t),this.alreadyInitialized=!0,this[O]())}},{key:"destroy",value:function(){this.isCanceled=!0,this.cancelationHandlers.forEach((function(e){return e()}))}},{key:"cacheResource",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(t.uid)e=t.uid;else{var r=JSON.stringify(t);e="".concat(r,".").concat(n),this.currentValue!=w&&Object(g.a)(this.resources,(function(e){var t=e.split(".");if(a()(t,1)[0]===r)throw Error("A new resource was conditionally yielded identical to a prior resource. This behavior is not supported, as TriFrame will not know where to properly yield state. Please give your resources unique `uid` properties")}))}this.resources[e]=t;var o=new EventEmitter,i=function(e){"function"==typeof e.on?e.on("Δ.change",(function(){return o.emit("change")})):Object(g.a)(e,(function(t,n){Object.defineProperty(e,t,{get:function(){return n},set:function(e){n=e,o.emit("change")}})}))};this.cache(o.on("change")),P(t,i)}}]),e}();b()(E,"isPipe",(function(e){return e&&"function"==typeof e.observe})),b()(E,"isPromise",(function(e){return e&&"function"==typeof e.then}));var _=["String","Boolean","Number","Date","Function"],P=function e(t,n){if(function(e){return e&&"object"===o()(e)&&!_.includes(e.constructor.name)}(t))for(var r in n(t),t){e(t[r],n)}}},function(e,t){e.exports=require("@babel/runtime/helpers/get")},function(e,t){e.exports=require("@babel/runtime/helpers/wrapNativeSuper")},function(e,t){e.exports=require("@babel/runtime/helpers/objectWithoutProperties")},function(e,t,n){"use strict";n.r(t),n.d(t,"Resource",(function(){return ae})),n.d(t,"List",(function(){return G})),n.d(t,"createSerializer",(function(){return le})),n.d(t,"createUnserializer",(function(){return xe}));var r=n(6),o=n.n(r),i=n(8),a=n.n(i),c=n(10),u=n.n(c),s=n(9),f=n.n(s),p=n(12),l=n.n(p),h=n(11),v=n.n(h),d=n(5),m=n(2),y=n.n(m),b=n(0),g=n.n(b),O=n(1),w=n.n(O),E=n(3),_=n.n(E),P=n(7),A=n.n(P),x=n(14).Pipe,C=Symbol(),j=Symbol(),S=Symbol(),R=function(){function e(){o()(this,e),Object.defineProperty(this,j,{value:{},enumerable:!1,writable:!0}),Object.defineProperty(this,S,{value:{},enumerable:!1,writable:!0}),Object.defineProperty(this,C,{value:[],enumerable:!1,writable:!0})}return a()(e,[{key:"_nowAndOn",value:function(e,t){t.callback=e,e(),t.calls.forEach((function(t){return e.apply(void 0,_()(t))}))}},{key:"nowAndOn",value:function(e,t){var n={events:e,calls:[],callback:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.calls.push(t)}},r=this.on(e);r.observe((function(){n.callback.apply(n,arguments)}));var o=new x(this._nowAndOn,n);return o.onCancel((function(){return r.destroy()})),t&&o.observe(t),o}},{key:"_onArray",value:function(e,t){var n=this;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Object,t=arguments.length>1?arguments[1]:void 0,n=!0,r=!1,o=void 0;try{for(var i,a=entries(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=A()(i.value,2),u=c[0],s=c[1],f=t(u,s,e);if(f===Break)break}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}(t,(function(t,r){return n.on(r,e)}))}},{key:"on",value:function(e,t){var n;return n=Array.isArray(e)?new x([this,this._onArray],e):this.provision(e),t&&n.observe(t),n}},{key:"emit",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Promise.all(this[C].map((function(o){if(n.matches(o.predicate,e))return new Promise((function(n){var i=o.callback(t,e,r);i&&i.then?i.then(n):n()}))})))}},{key:"_provision",value:function(e,t,n){t.callback=e,n.forEach(function(){var t=w()(g.a.mark((function t(n){var r,o,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=A()(n,2),o=r[0],i=r[1],t.next=3,e.apply(void 0,_()(o));case 3:i();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"provision",value:function(e){var t=this,n=new Array,r={predicate:e,callback:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Promise((function(e){n.push([t,e])}))}};this[C].push(r);var o=new x(this._provision,r,n);return o.onCancel((function(){t[C]=t[C].filter((function(e){return e!==r}))})),o}},{key:"of",value:function(t){var n=this;if(this[S][t])return this[S][t];var r=this[S][t]=new e,o=Symbol();return this.on("".concat(t,".*"),(function(e,n,i){if(!i[o]){var a=n.replace("".concat(t,"."),"");r.emit(a,e)}})),r.on("*",(function(e,r){n.emit("".concat(t,".").concat(r),e,y()({},o,!0))})),r}},{key:"matches",value:function(e,t){return t===e||(!(!t.endsWith("*")||!e.startsWith(t.substr(0,t.length-1))&&!e.startsWith("*"))||(!(!t.startsWith("*")||!e.endsWith(t.substr(1))&&!e.endsWith("*"))||(!(!e.endsWith("*")||!t.startsWith(e.substr(0,e.length-1)))||!(!e.startsWith("*")||!t.endsWith(e.substr(1))))))}},{key:"bin",get:function(){return this[C]}}]),e}();"undefined"!=typeof window&&(window.EventEmitter=R);var k={UNCOUNTABLE_WORDS:["equipment","information","rice","money","species","series","fish","sheep","moose","deer","news"],Rules:{SINGULAR_TO_PLURAL:[[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/(m|l)ouse$/gi,"$1ice"],[/(quiz)$/gi,"$1zes"],[/s$/gi,"s"],[/$/g,"s"]],PLURAL_TO_SINGULAR:[[/(m)en$/gi,"$1an"],[/(pe)ople$/gi,"$1rson"],[/(child)ren$/gi,"$1"],[/([ti])a$/gi,"$1um"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/gi,"$2sis"],[/(hive)s$/gi,"$1"],[/(tive)s$/gi,"$1"],[/(curve)s$/gi,"$1"],[/([lr])ves$/gi,"$1f"],[/([^fo])ves$/gi,"$1fe"],[/([^aeiouy]|qu)ies$/gi,"$1y"],[/(s)eries$/gi,"$1eries"],[/(m)ovies$/gi,"$1ovie"],[/(x|ch|ss|sh)es$/gi,"$1"],[/(m|l)ice$/gi,"$1ouse"],[/(bus)es$/gi,"$1"],[/(o)es$/gi,"$1"],[/(shoe)s$/gi,"$1"],[/(cris|ax|test)es$/gi,"$1is"],[/(octop|vir)i$/gi,"$1us"],[/(alias|status)es$/gi,"$1"],[/^(ox)en/gi,"$1"],[/(vert|ind)ices$/gi,"$1ex"],[/(matr)ices$/gi,"$1ix"],[/(quiz)zes$/gi,"$1"],[/s$/gi,""]]},TITLE_LOWERCASE_WORDS:["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],CommonRegExp:{ID_SUFFIX:/(_ids|_id)$/g,UNDERSCORES:/_+/g,NUMBERS:/(^|\s)\d+/g,SPACES:/\s+/g,SPACES_OR_UNDERSCORES:/[\s_]+/g,UPPERCASE:/[A-Z]/g,UNDERSCORE_PREFIX:/^_/},applyRules_:function(e,t,n){if(!(-1!==n.indexOf(e.toLowerCase())))for(var r=0,o=t.length;r<o;++r){var i=t[r];if(i[0].test(e))return i[0].lastIndex=0,e.replace(i[0],i[1]);i[0].lastIndex=0}return e},toPlural:function(e){return k.applyRules_(e,k.Rules.SINGULAR_TO_PLURAL,k.UNCOUNTABLE_WORDS)},toSingular:function(e){return k.applyRules_(e,k.Rules.PLURAL_TO_SINGULAR,k.UNCOUNTABLE_WORDS)},toCamelCase:function(e,t){for(var n=(e=e.toLowerCase()).split(k.CommonRegExp.SPACES_OR_UNDERSCORES),r=!0===t?0:1,o=n.length;r<o;++r){var i=n[r];n[r]=i.charAt(0).toUpperCase()+i.substr(1)}return n.join("")},toPascalCase:function(e){return k.toCamelCase(e,!0)},toTitleCase:function(e){for(var t=(e=e.replace(k.CommonRegExp.UNDERSCORES," ")).split(k.CommonRegExp.SPACES),n=0,r=t.length;n<r;++n){for(var o=t[n].split("-"),i=0,a=o.length;i<a;++i){var c=o[i].toLowerCase();k.TITLE_LOWERCASE_WORDS.indexOf(c)<0&&(o[i]=k.toCapitalized(c))}t[n]=o.join("-")}return e=(e=t.join(" ")).charAt(0).toUpperCase()+e.substr(1)},toUnderscored:function(e){return(e=(e=(e=(e=e.replace(k.CommonRegExp.SPACES_OR_UNDERSCORES,"_")).replace(k.CommonRegExp.UPPERCASE,(function(e){return"_".concat(e)}))).replace(k.CommonRegExp.UNDERSCORES,"_")).replace(k.CommonRegExp.UNDERSCORE_PREFIX,"")).toLowerCase()},toDashed:function(e){return e=e.replace(k.CommonRegExp.SPACES_OR_UNDERSCORES,"-")},toHumanized:function(e,t){return e=(e=(e=e.toLowerCase()).replace(k.CommonRegExp.ID_SUFFIX,"")).replace(k.CommonRegExp.UNDERSCORES," "),t?e:k.toCapitalized(e)},toCapitalized:function(e){return e=(e=e.toLowerCase()).charAt(0).toUpperCase()+e.substr(1)},toTableName:function(e){return e=k.toUnderscored(e),e=k.toPlural(e)},toColumnName:function(e){return e=k.toUnderscored(e)},toClassName:function(e){return e=k.toPascalCase(e),e=k.toSingular(e)},toForeignKeyName:function(e){return e=k.toUnderscored(e),e+="_id"},replaceNumbersWithOrdinals:function(e){return e.replace(k.CommonRegExp.NUMBERS,(function(e){var t=Number(e.slice(-1));if(1!==Number(e.slice(-2,-1))){if(1===t)return e+"st";if(2===t)return e+"nd";if(3===t)return e+"rd"}return e+"th"}))}},N=(k.toPlural,k.toSingular,k.toCamelCase,k.toPascalCase,k.toTitleCase),$=(k.toDashed,k.toUnderscored,k.toHumanized,k.toCapitalized);k.toTableName,k.toClassName,k.toForeignKeyName,k.replaceNumbersWithOrdinals,k.toColumnName;function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I,L={},U=[Object.prototype,Function.prototype,R.prototype,void 0,null],J=function(e,t){for(var n={},r="function"==typeof e?".":"#",o="function"==typeof e?e.prototype:e.__proto__;!U.includes(o);o=o.__proto__){var i=o.constructor,a="".concat(i.name).concat(r).concat(t);n=D({},L[a],{},n)}return n},V=n(14),F=n(13),q=n.n(F),M=n(4),H=n.n(M),W=n(15),B=n.n(W),z=n(16),G=function(e){function t(){var e,n;o()(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=u()(this,(e=f()(t)).call.apply(e,[this].concat(i))),Object.defineProperty(l()(n),"[[patches]]",{enumerable:!1,value:[]}),Object.defineProperty(l()(n),"[[events]]",{enumerable:!1,value:new R}),n}return v()(t,e),a()(t,[{key:"on",value:function(){var e;return(e=this["[[events]]"]).on.apply(e,arguments)}},{key:"emit",value:function(){var e;return(e=this["[[events]]"]).emit.apply(e,arguments)}},{key:"push",value:function(){for(var e,n,r=this.length,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var c=i.map((function(e){return{op:"add",path:"/".concat(r++),value:e}}));(e=this["[[patches]]"]).push.apply(e,_()(c)),this.emit("Δ.change",c),(n=B()(f()(t.prototype),"push",this)).call.apply(n,[this].concat(i))}},{key:"insert",value:function(e,t){this.splice(t,0,e);var n={op:"add",path:"/".concat(t),value:e};this["[[patches]]"].push(n),this.emit("Δ.change",[n])}},{key:"replace",value:function(e,t){this[e]=t;var n={op:"replace",path:"/".concat(e),value:t};this["[[patches]]"].push(n),this.emit("Δ.change",[n])}},{key:"remove",value:function(e){this.splice(e,1);var t={op:"remove",path:"/".concat(e)};this["[[patches]]"].push(t),this.emit("Δ.change",[t])}}]),t}(n.n(z)()(Array)),K=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){
/*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017 Joachim Wester
   * MIT license
   */
var n=this&&this.__extends||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);function r(){this.constructor=e}e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},r=Object.prototype.hasOwnProperty;function o(e,t){return r.call(e,t)}function i(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)o(e,r)&&t.push(r);return t}function a(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function c(e,t){var n;for(var r in e)if(o(e,r)){if(e[r]===t)return a(r)+"/";if("object"===H()(e[r])&&""!=(n=c(e[r],t)))return a(r)+"/"+n}return""}function u(e,t){var n=[e];for(var r in t){var o="object"===H()(t[r])?JSON.stringify(t[r],null,2):t[r];void 0!==o&&n.push(r+": "+o)}return n.join("\n")}t.hasOwnProperty=o,t._objectKeys=i,t._deepClone=function(e){switch(H()(e)){case"object":return JSON.parse(JSON.stringify(e),(function(e,t){return Array.isArray(t)?q()(G,_()(t)):t}));case"undefined":return null;default:return e}},t.isInteger=function(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0},t.escapePathComponent=a,t.unescapePathComponent=function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")},t._getPathRecursive=c,t.getPath=function(e,t){if(e===t)return"/";var n=c(e,t);if(""===n)throw new Error("Object not found in root");return"/"+n},t.hasUndefined=function e(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0}else if("object"===H()(t)){var o=i(t),a=o.length;for(n=0;n<a;n++)if(e(t[o[n]]))return!0}return!1};var s=function(e){function t(t,n,r,o,i){e.call(this,u(t,{name:n,index:r,operation:o,tree:i})),this.name=n,this.index=r,this.operation=o,this.tree=i,this.message=u(t,{name:n,index:r,operation:o,tree:i})}return n(t,e),t}(Error);t.PatchError=s},function(e,t,n){var r={strict:!0},o=n(3),i=function(e,t){return o(e,t,r)},a=n(0);t.JsonPatchError=a.PatchError,t.deepClone=a._deepClone;var c={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=s(n,this.path);r&&(r=a._deepClone(r));var o=f(n,{op:"remove",path:this.from}).removed;return f(n,{op:"add",path:this.path,value:o}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=s(n,this.from);return f(n,{op:"add",path:this.path,value:a._deepClone(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:i(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},u={add:function(e,t,n){return a.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:c.move,copy:c.copy,test:c.test,_get:c._get};function s(e,t){if(""==t)return e;var n={op:"_get",path:t};return f(e,n),n.value}function f(e,n,r,o,f,p){if(void 0===r&&(r=!1),void 0===o&&(o=!0),void 0===f&&(f=!0),void 0===p&&(p=0),r&&("function"==typeof r?r(n,0,e,n.path):l(n,0)),""===n.path){var h={newDocument:e};if("add"===n.op)return h.newDocument=n.value,h;if("replace"===n.op)return h.newDocument=n.value,h.removed=e,h;if("move"===n.op||"copy"===n.op)return h.newDocument=s(e,n.from),"move"===n.op&&(h.removed=e),h;if("test"===n.op){if(h.test=i(e,n.value),!1===h.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",p,n,e);return h.newDocument=e,h}if("remove"===n.op)return h.removed=e,h.newDocument=null,h;if("_get"===n.op)return n.value=e,h;if(r)throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",p,n,e);return h}o||(e=a._deepClone(e));var v=(n.path||"").split("/"),d=e,m=1,y=v.length,b=void 0,g=void 0,O=void 0;for(O="function"==typeof r?r:l;;){if(g=v[m],f&&"__proto__"==g)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&void 0===b&&(void 0===d[g]?b=v.slice(0,m).join("/"):m==y-1&&(b=n.path),void 0!==b&&O(n,0,e,b)),m++,Array.isArray(d)){if("-"===g)g=d.length;else{if(r&&!a.isInteger(g))throw new t.JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",p,n,e);a.isInteger(g)&&(g=~~g)}if(m>=y){if(r&&"add"===n.op&&g>d.length)throw new t.JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",p,n,e);if(!1===(h=u[n.op].call(n,d,g,e)).test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",p,n,e);return h}}else if(g&&-1!=g.indexOf("~")&&(g=a.unescapePathComponent(g)),m>=y){if(!1===(h=c[n.op].call(n,d,g,e)).test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",p,n,e);return h}d=d[g]}}function p(e,n,r,o,i){if(void 0===o&&(o=!0),void 0===i&&(i=!0),r&&!Array.isArray(n))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");o||(e=a._deepClone(e));for(var c=new Array(n.length),u=0,s=n.length;u<s;u++)c[u]=f(e,n[u],r,!0,i,u),e=c[u].newDocument;return c.newDocument=e,c}function l(e,n,r,o){if("object"!==H()(e)||null===e||Array.isArray(e))throw new t.JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",n,e,r);if(!c[e.op])throw new t.JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",n,e,r);if("string"!=typeof e.path)throw new t.JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",n,e,r);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new t.JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",n,e,r);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new t.JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",n,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",n,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&a.hasUndefined(e.value))throw new t.JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",n,e,r);if(r)if("add"==e.op){var i=e.path.split("/").length,u=o.split("/").length;if(i!==u+1&&i!==u)throw new t.JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",n,e,r)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==o)throw new t.JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",n,e,r)}else if("move"===e.op||"copy"===e.op){var s=h([{op:"_get",path:e.from,value:void 0}],r);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new t.JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",n,e,r)}}function h(e,n,r){try{if(!Array.isArray(e))throw new t.JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(n)p(a._deepClone(n),a._deepClone(e),r||!0);else{r=r||l;for(var o=0;o<e.length;o++)r(e[o],o,n,void 0)}}catch(e){if(e instanceof t.JsonPatchError)return e;throw e}}t.getValueByPointer=s,t.applyOperation=f,t.applyPatch=p,t.applyReducer=function(e,n,r){var o=f(e,n);if(!1===o.test)throw new t.JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",r,n,e);return o.newDocument},t.validator=l,t.validate=h},function(e,t,n){
/*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017 Joachim Wester
   * MIT license
   */
var r=n(0),o=n(1),i=n(1);t.applyOperation=i.applyOperation,t.applyPatch=i.applyPatch,t.applyReducer=i.applyReducer,t.getValueByPointer=i.getValueByPointer,t.validate=i.validate,t.validator=i.validator;var a=n(0);t.JsonPatchError=a.PatchError,t.deepClone=a._deepClone,t.escapePathComponent=a.escapePathComponent,t.unescapePathComponent=a.unescapePathComponent;var c=new WeakMap,u=function(e){this.observers=new Map,this.obj=e},s=function(e,t){this.callback=e,this.observer=t};function f(e){var t=c.get(e.object);p(t.value,e.object,e.patches,""),e.patches.length&&o.applyPatch(t.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n}function p(e,t,n,o){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var i=r._objectKeys(t),a=r._objectKeys(e),c=!1,u=a.length-1;u>=0;u--){var s=e[l=a[u]];if(!r.hasOwnProperty(t,l)||void 0===t[l]&&void 0!==s&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(n.push({op:"remove",path:o+"/"+r.escapePathComponent(l)}),c=!0):(n.push({op:"replace",path:o,value:t}),!0);else{var f=t[l];"object"==H()(s)&&null!=s&&"object"==H()(f)&&null!=f?p(s,f,n,o+"/"+r.escapePathComponent(l)):s!==f&&(!0,n.push({op:"replace",path:o+"/"+r.escapePathComponent(l),value:r._deepClone(f)}))}}if(c||i.length!=a.length)for(u=0;u<i.length;u++){var l=i[u];r.hasOwnProperty(e,l)||void 0===t[l]||n.push({op:"add",path:o+"/"+r.escapePathComponent(l),value:r._deepClone(t[l])})}}}t.unobserve=function(e,t){t.unobserve()},t.observe=function(e,t){var n,o=function(e){return c.get(e)}(e);if(o){var i=function(e,t){return e.observers.get(t)}(o,t);n=i&&i.observer}else o=new u(e),c.set(e,o);if(n)return n;if(n={},o.value=r._deepClone(e),t){n.callback=t,n.next=null;var a=function(){f(n)},p=function(){clearTimeout(n.next),n.next=setTimeout(a)};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mouseup",p),window.addEventListener("keyup",p),window.addEventListener("mousedown",p),window.addEventListener("keydown",p),window.addEventListener("change",p)):(document.documentElement.attachEvent("onmouseup",p),document.documentElement.attachEvent("onkeyup",p),document.documentElement.attachEvent("onmousedown",p),document.documentElement.attachEvent("onkeydown",p),document.documentElement.attachEvent("onchange",p)))}return n.patches=[],n.object=e,n.unobserve=function(){f(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(o,n),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mouseup",p),window.removeEventListener("keyup",p),window.removeEventListener("mousedown",p),window.removeEventListener("keydown",p)):(document.documentElement.detachEvent("onmouseup",p),document.documentElement.detachEvent("onkeyup",p),document.documentElement.detachEvent("onmousedown",p),document.documentElement.detachEvent("onkeydown",p)))},o.observers.set(t,new s(t,n)),n},t.generate=f,t.compare=function(e,t){var n=[];return p(e,t,n,""),n}},function(e,t,n){var r=Array.prototype.slice,o=n(5),i=n(4),a=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=H()(e)&&"object"!=H()(t)?n.strict?e===t:e==t:function(e,t,n){var s,f;if(c(e)||c(t))return!1;if(e.prototype!==t.prototype)return!1;if(i(e))return!!i(t)&&(e=r.call(e),t=r.call(t),a(e,t,n));if(u(e)){if(!u(t))return!1;if(e.length!==t.length)return!1;for(s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}try{var p=o(e),l=o(t)}catch(e){return!1}if(p.length!=l.length)return!1;for(p.sort(),l.sort(),s=p.length-1;s>=0;s--)if(p[s]!=l[s])return!1;for(s=p.length-1;s>=0;s--)if(f=p[s],!a(e[f],t[f],n))return!1;return H()(e)===H()(t)}(e,t,n))};function c(e){return null==e}function u(e){return!(!e||"object"!==H()(e)||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}},function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function o(e){return e&&"object"==H()(e)&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:o).supported=r,t.unsupported=o},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n}]),X=function(){var e=e||{};e.transform=function(e,n){var r=[];r=r.concat.apply(r,n);var o=JSON.parse(JSON.stringify(e));return r.reduce(t,o)},e.transformAgainstSingleOp=function(e,t){};var t=function(e,t){if(void 0===t.value&&("add"===t.op||"replace"===t.op||"test"===t.op))throw new Error("'value' MUST be defined");if(void 0===t.from&&("copy"===t.op||"move"===t.op))throw new Error("'from' MUST be defined");if(n[t.op])if("function"==typeof n[t.op])n[t.op](t,e);else for(var r=e.length,o=0;o<r;){var i=e[o];o++,n[t.op][i.op]&&n[t.op][i.op](t,i)}return e},n={remove:function(e,t){for(var n,i=t.length,a=0;n=t[a];)("add"!==n.op&&"test"!==n.op||e.path!==n.path)&&(n.from&&(n.from===e.path||0===n.from.indexOf(e.path+"/"))||e.path===n.path||0===n.path.indexOf(e.path+"/"))&&(t.splice(a,1),i--,a--),a++;var c=e.path.lastIndexOf("/");if(c>-1){var u=e.path.substr(c+1),s=e.path.substr(0,c+1);if(o(u))for(i=t.length,a=0;a<i;)n=t[a],a++,0===n.path.indexOf(s)&&(n.path=r(n.path,s,u,-1)),n.from&&0===n.from.indexOf(s)&&(n.from=r(n.from,s,u,-1))}},add:function(e,t){for(var n,i=t.length,a=0;n=t[a];)("add"!==n.op&&"test"!==n.op||e.path!==n.path)&&(n.from&&(n.from===e.path||0===n.from.indexOf(e.path+"/"))||e.path===n.path||0===n.path.indexOf(e.path+"/"))&&(t.splice(a,1),i--,a--),a++;var c=e.path.lastIndexOf("/");if(c>-1){var u=e.path.substr(c+1),s=e.path.substr(0,c+1);if(o(u))for(i=t.length,a=0;a<i;)n=t[a],a++,0===n.path.indexOf(s)&&(n.path=r(n.path,s,u,1)),n.from&&0===n.from.indexOf(s)&&(n.from=r(n.from,s,u,1))}},replace:function(e,t){for(var n,r=0;n=t[r];)(n.from&&(n.from===e.path||0===n.from.indexOf(e.path+"/"))||0===n.path.indexOf(e.path+"/"))&&(t.splice(r,1),r--),r++}};function r(e,t,n,r){var i=e.substr(t.length),a=i.indexOf("/");a>-1||(a=i.length);var c=i.substr(0,a),u=i.substr(a);return o(c)&&r>0&&c>=n||r<0&&c>n?t+(parseInt(c)+r)+u:e}function o(e){var t=~~Number(e);return String(t)===e&&t>=0}return e}(),Q=function(e,t){Object.defineProperty(e,"[[attributes]]",{writable:!0,enumerable:!1,value:t}),Object.defineProperty(e,"[[base]]",{writable:!0,enumerable:!1,value:K.deepClone(t)}),Object.defineProperty(e,"[[patches]]",{writable:!0,enumerable:!1,value:[]}),Object.defineProperty(e,"[[batch]]",{writable:!0,enumerable:!1,value:1}),Object.defineProperty(e,"[[syncRate]]",{writable:!0,enumerable:!1,value:0}),oe(e,t),"function"==typeof e.onChange&&e.on("Δ.change",(function(t){return ie(e,"change",t)}))},Y=function(e){var t=[];return e["[[patches]]"].forEach((function(n){var r=!n.staged;n.batchId||(n.batchId=e["[[batch]]"]),r&&(n.staged=!0,t.push(n))})),t},Z=function(e,t){var n;return e&&e["[[patches]]"]?(K.applyPatch(e["[[attributes]]"],t),(n=e["[[patches]]"]).push.apply(n,_()(t)),t):[]},ee=function(e,t){return e["[[patches]]"]=X.transform(e["[[patches]]"],t),ie(e,"merge",t),re(e,t)},te=function(e){return e["[[batch]]"]++},ne=function(e,t){var n=e["[[patches]]"].filter((function(e){return e.batchId===t}));return e["[[patches]]"]=e["[[patches]]"].filter((function(e){return e.batchId!==t})),re(e,n)},re=function(e,t){K.applyPatch(e["[[base]]"],t);var n=K.deepClone(e["[[base]]"]);return K.applyPatch(n,e["[[patches]]"]),e["[[attributes]]"]=n,oe(e,n),t},oe=function(e,t){Object(d.a)(t,(function(t,n){n&&n.on&&n.on("Δ.change",(function(n){var r,o=n.map((function(e){return{op:e.op,path:"/".concat(t).concat(e.path),value:e.value}}));(r=e["[[patches]]"]).push.apply(r,_()(o)),e.emit("Δ.change",o)}))}))},ie=function(e,t,n){e.emit("Δ.".concat(t),n);var r="on".concat($(t));"function"==typeof e[r]&&e[r](n)},ae=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o()(this,t),e=u()(this,f()(t).call(this)),Q(l()(e),n),e}return v()(t,e),a()(t,[{key:"set",value:function(e){Object.assign(this,e)}},{key:"uid",get:function(){return void 0!==this.id?"".concat(this.constructor.name,".").concat(this.id):null}},{key:"validation",get:function(){return this["[[validation]]"].for(this)}}]),t}(R);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object.defineProperty(ae.prototype,"[[validation]]",{writable:!0,enumerable:!1,value:(I={},{for:function(e){e["[[validationState]]"]||Object.defineProperty(e,"[[validationState]]",{enumerable:!1,value:{}});var t=e["[[validationState]]"],n=function(e){return r(e).length>0},r=function(t){var n=I[t];if(void 0!==n){var r=e[t],o=[],i=N(t);return n.forEach((function(t){return t({property:r,label:i,errors:o,resource:e})})),o}return[]},o={addHandler:function(e,t){I[e]=I[e]||[],I[e].push(t)},errorMessageFor:function(e){var t=r(e);if(0===t.length)return" ";if(1===t.length)return"".concat(N(e)," ").concat(t[0]);var n=t.pop();return"".concat(N(e)," ").concat(t.join(", ")," and ").concat(n)},shouldShowErrorsFor:function(e){return!0===t[e]&&n(e)},showErrorsFor:function(n){t[n]=!0,e.emit("Δ.change")},hideErrorsFor:function(e){t[e]=!1},showAllErrors:function(){Object(d.a)(I,(function(e){t[e]=!0})),e.emit("Δ.change")},hideAllErrors:function(){Object(d.a)(I,(function(e){t[e]=!1})),e.emit("Δ.change")},get isInvalid(){var e=!1;return Object(d.a)(I,(function(t){e=e||n(t)})),e},get isValid(){return!o.isInvalid}};return o}})});var se=["String","Boolean","Number","Date","Function"],fe=[Object.prototype,Function.prototype,ae.prototype,ae,R.prototype,void 0,null],pe=function(e){return"function"==typeof e?["length","name","prototype"]:["constructor","[[attributes]]","[[patches]]","[[base]]","[[batch]]","[[validation]]"]},le=function(e){var t=function e(t,r){for(var c={},u={},s=function(e){Object(d.a)(Object.getOwnPropertyDescriptors(e),(function(t,n){pe(e).includes(t)||(u[t]=r[t],c[t]=n)}))},f=r;!fe.includes(f);f=f.__proto__)s(f);return Object(d.b)(u,(function(u,s){var f=c[u],p=J(r,u);return"private"===p.accessLevel?null:he(s,f)?n("".concat(t,"/").concat(u),s,f,p,r,u):ve(s,f)?e("".concat(t,"/").concat(u),s):de(s,f)?o("".concat(t,"/").concat(u),s,f,p,r,u):me(s,f)?i("".concat(t,"/").concat(u),s,f,p,r,u):ye(s,f)?a("".concat(t,"/").concat(u),s,f,p,r,u):void 0}))},n=function(e,t){var n=new t;return{name:e,type:"class",className:t.name,classMethods:r(e,t),instanceMethods:ue({},r("".concat(e,"/#"),n),{sync:o("".concat(e,"/#/sync"),n.sync,{},{},n)})}},r=function(e,n){for(var r={},c=function(e){Object(d.a)(Object.getOwnPropertyDescriptors(e),(function(t,n){pe(e).includes(t)||(r[t]=n)}))},u=n;!fe.includes(u);u=u.__proto__)c(u);return Object(d.b)(r,(function(r,c){var u=J(n,r);return ve(c.value,c)?t("".concat(e,"/").concat(r),c.value,c,u,n,r):de(c.value,c)?o("".concat(e,"/").concat(r),c.value,c,u,n,r):me(c.value,c)?i("".concat(e,"/").concat(r),c.value,c,u,n,r):ye(c.value,c)?a("".concat(e,"/").concat(r),c.value,c,u,n,r):void 0}))},o=function(t,n,r,o,i){var a=o.isShared,c=o.accessLevel,u=o.authCheck,s=o.usesSession;return a?{name:t,type:"shared-function",value:n.toString()}:(e.on(t,function(){var e=w()(g.a.mark((function e(t){var r,o,a,f,p,l,h,v,d;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.args,o=t.uid,a=t.patches,f=t.connection,p=t.send,l=t.onClose,f.cache=f.cache||we(f),h=function(e,t){s&&f.session.save(),p(Ee(e,f),t)},v=o?f.cache.getCached(o):"function"==typeof i?i:new i.constructor,a&&Z(v,a),e.t0="private"===c,e.t0){e.next=13;break}if(e.t1="protected"===c,!e.t1){e.next=12;break}return e.next=11,u(f.session,v);case 11:e.t1=!e.sent;case 12:e.t0=e.t1;case 13:if(!e.t0){e.next=15;break}return e.abrupt("return",p({error:!0,message:"You are not authorized to call this method"}));case 15:s&&r.unshift(f.session);try{d=n.apply(v,r)}catch(e){p({error:!0,message:e.message})}d&&d.catch&&d.catch((function(e){return p({error:!0,message:e.message})})),be(d)?(d.observe((function(e){return h(e,!0)})),l((function(){return d.destroy()}))):ge(d)?d.then((function(e){return h(e)})):h(d);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),{name:t,type:"remote-function"})},i=function(e,t,n,r,i,a){var c=r.validators;return{name:e,key:a,type:"property",get:o("".concat(e,".get"),n.get||function(){return null},n,r,i),set:o("".concat(e,".set"),n.set||function(){return null},n,r,i),validators:c&&c.map((function(e){return e.toString()}))}},a=function(e,t,n,r,o,i){var a=r.validators;return{name:e,key:i,type:"attribute",value:n.value,validators:a&&a.map((function(e){return e.toString()}))}};return function(e){if(!ve(e))throw Error("$interface must be a plain JavaScript Object");return t("global",e)}},he=function(e){return"function"==typeof e&&e.prototype instanceof ae},ve=function(e){return e&&e.__proto__===Object.prototype},de=function(e){return"function"==typeof e&&!he(e)},me=function(e,t){return"function"==typeof t.get||"function"==typeof t.set},ye=function(e,t){return[he,ve,de,me].every((function(n){return!n(e,t)}))},be=function(e){return e&&"function"==typeof e.observe},ge=function(e){return e&&"function"==typeof e.then&&!be(e)},Oe={},we=function(e){var t=e.socket,n={};return{cache:function(e){if(Oe[e.uid]=Oe[e.uid]||{patches:[],branches:[]},ee(e,Oe[e.uid].patches),!n[e.uid]){n[e.uid]=e,Oe[e.uid].branches.push({socket:t,resource:e}),t.on("".concat(e.uid,".sync"),(function(n){var r=n.batchId,i=n.patches;Z(e,i),o(r),t.emit("".concat(e.uid,".commitBatch"),r)})),e.on("Δ.sync",(function(){Y(e);var t=te(e);o(t,{includeSelf:!0})}));var r=[];e.on("Δ.commiting",(function(){r.push(_()(Oe[e.uid].patches))})),e.on("Δ.commited",(function(){var t=r.shift();Oe[e.uid].patches=Oe[e.uid].patches.filter((function(e){return!t.includes(e)}))}))}var o=function(n){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.includeSelf,a=void 0!==i&&i,c=ne(e,n);(r=Oe[e.uid].patches).push.apply(r,_()(c)),Oe[e.uid].branches.forEach((function(e){var n=e.socket,r=e.resource;(t!=n||a)&&(ee(r,c),n.emit("".concat(r.uid,".mergePatches"),c))}))};return e},getCached:function(e){return n[e]}}},Ee=function e(t,n){var r,o=function(t){return e(t,n)};return t?he(t)?{_class_:t.name}:(r=t,se.includes(r.constructor.name)?t:function(e){return Array.isArray(e)}(t)?t.map((function(e,t){return o(e)})):ve(t)?Object(d.b)(t,(function(e,t){return o(t)})):function(e){return e instanceof ae}(t=n.cache.cache(t))?ue({},Object(d.b)(t["[[attributes]]"],(function(e,r){var i=J(t,e),a=i.accessLevel,c=i.authCheck;return"private"==a?null:"protected"!=a||c(n.session)?o(r):null})),{_proto_:t.constructor.name}):void 0):t},_e=n(17),Pe=n.n(_e),Ae=["String","Boolean","Number","Date","Function"],xe=function(e){var t=Ce({socket:e}),n={Resource:ae,List:G},r=function(e){var t=function(e){function t(){return o()(this,t),u()(this,f()(t).apply(this,arguments))}return v()(t,e),t}(ae);return Object.defineProperty(t,"name",{value:e.className}),i(t,e.classMethods),i(t.prototype,e.instanceMethods),t},i=function e(t,n){return Object(d.a)(n,(function(n,o){switch(o.type){case"class":t[n]=r(o);break;case"object":t[n]=e({},o);break;case"shared-function":t[n]=c(o);break;case"remote-function":t[n]=s(o);break;case"property":p(t,n,o);break;case"attribute":t[n]=l(o,t)}})),t},a=function(e){switch(e.type){case"shared-function":return c(e);case"remote-function":return s(e)}},c=function(e){return new Function("return ".concat(e.value))()},s=function(t){var n=t.name,r=function(t,r){var o=this.uid,i=this.getNewPatches?this.getNewPatches():[],a=function(e){e&&e.error&&t.throw(new Error(e.message));var n=h(e,(function(){return t(n)}));t(n)};e.emit(n,{uid:o,patches:i,args:r},(function(t){var c=t.value,u=t.hook;a(c),void 0!==u&&(e.on(u,(function(e){var t=e.value;return a(t)})),e.on("reconnect",(function(){e.emit(n,{uid:o,patches:i,args:r},(function(t){var n=t.value,r=t.hook;a(n),void 0!==r&&e.on(r,(function(e){var t=e.value;return a(t)}))}))})))}))};return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new V.Pipe([this,r],t)}},p=function(e,t,n){var r=e.validation;r&&n.validators&&n.validators.forEach((function(e){r.addHandler(n.key,c({value:e}))})),Object.defineProperty(e,t,{get:a(n.get),set:a(n.set)})},l=function(e,t){var n=t.validation;return n&&e.validators&&e.validators.forEach((function(t){n.addHandler(e.key,c({value:t}))})),e.value},h=function e(r,o){var i=function(t){return e(t,o)};if(!r)return r;if(Ae.includes(r.constructor.name))return r;if(Array.isArray(r))return q()(G,_()(r.map((function(e){return i(e)}))));var a=r._class_,c=r._proto_,u=Pe()(r,["_class_","_proto_"]);return a?n[__class__]:c?t.register(new n[c](Object(d.b)(u,(function(e,t){return i(t)}))),o):Object(d.b)(u,(function(e,t){return i(t)}))};return function(e){if("object"!==H()(e))throw Error("schema must be a plain JavaScript Object");return i(n,e)}},Ce=function(e){var t=e.socket;return{register:function(e,n){var r;return e.on("Δ.change",(function(){r&&clearTimeout(r),r=setTimeout((function(){e.emit("Δ.sync")}),e["[[syncRate]]"])})),e.on("Δ.sync",(function(){var r=Y(e),o=te(e);t.emit("".concat(e.uid,".sync"),{patches:r,batchId:o}),n()})),t.on("".concat(e.uid,".commitBatch"),(function(t){ne(e,t)})),t.on("".concat(e.uid,".mergePatches"),(function(t){ee(e,t),n()})),e}}}}]);